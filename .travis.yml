group: travis_latest
dist: xenial  # required for Python >= 3.7 (travis-ci/travis-ci#9069)
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=bnoordhuis/appmetrics        # 2017-07-11 RuntimeTools/appmetrics
  - REPO=RuntimeTools/appmetrics
  - REPO=bnoordhuis/emscripten        # 2013-10-31 emscripten-core/emscripten
  - REPO=emscripten-core/emscripten
  - REPO=bnoordhuis/fsevents          # 2018-05-16 fsevents/fsevents
  - REPO=fsevents/fsevents
  - REPO=bnoordhuis/GtkRadiant        # 2012-04-14 TTimo/GtkRadiant
  - REPO=TTimo/GtkRadiant
  - REPO=bnoordhuis/gumbo-parser      # 2013-08-15 google/gumbo-parser
  - REPO=google/gumbo-parser
  - REPO=bnoordhuis/gyp               # 2018-10-30
  - REPO=bnoordhuis/http-parser       # 2019-04-16 nodejs/http-parser
  - REPO=nodejs/http-parser
  - REPO=bnoordhuis/io                # 2017-02-09 IoLanguage/io
  - REPO=IoLanguage/io
  - REPO=bnoordhuis/io.js             # 2019-06-21 nodejs/node
  - REPO=nodejs/node
  - REPO=bnoordhuis/lcc               # 2017-07-10 drh/lcc
  - REPO=drh/lcc
  - REPO=bnoordhuis/libuv             # 2019-06-22 libuv/libuv
  - REPO=libuv/libuv
  - REPO=bnoordhuis/libv8             # 2017-05-17
  - REPO=bnoordhuis/linux             # 2013-02-04 torvalds/linux
  - REPO=torvalds/linux
  - REPO=bnoordhuis/llnode            # 2017-10-06 nodejs/llnode
  - REPO=nodejs/llnode
  - REPO=bnoordhuis/luvit             # 2012-04-22 luvit/luvit
  - REPO=luvit/luvit
  - REPO=bnoordhuis/mongrel2          # 2010-09-26
  - REPO=bnoordhuis/nan               # 2019-05-16 nodejs/nan
  - REPO=nodejs/nan
  - REPO=bnoordhuis/neovim            # 2015-10-10 neovim/neovim
  - REPO=neovim/neovim
  - REPO=bnoordhuis/node              # 2015-06-29 nodejs/node-v0.x-archive
  - REPO=nodejs/node-v0.x-archive
  - REPO=bnoordhuis/node-backtrace    # 2015-11-04
  - REPO=bnoordhuis/node-buffertools  # 2017-04-04
  - REPO=bnoordhuis/node-curl         # 2011-06-07
  - REPO=bnoordhuis/node-fibers       # 2015-01-19 laverdet/node-fibers
  - REPO=laverdet/node-fibers
  - REPO=bnoordhuis/node-gyp          # 2019-05-06 nodejs/node-gyp
  - REPO=nodejs/node-gyp
  - REPO=bnoordhuis/node-hashring     # 2015-08-09 3rd-Eden/node-hashring
  - REPO=3rd-Eden/node-hashring
  - REPO=bnoordhuis/node-heapdump     # 2019-05-07
  - REPO=bnoordhuis/node-ibm_db       # 2017-02-15 ibmdb/node-ibm_db
  - REPO=ibmdb/node-ibm_db
  - REPO=bnoordhuis/node-iconv        # 2019-06-24
  - REPO=bnoordhuis/node-idle-gc      # 2015-11-29
  - REPO=bnoordhuis/node-memwatch     # 2014-01-23 lloyd/node-memwatch
  - REPO=lloyd/node-memwatch
  - REPO=bnoordhuis/node-mmap         # 2012-08-13
  - REPO=bnoordhuis/node-odbc         # 2017-03-07 wankdanker/node-odbc
  - REPO=wankdanker/node-odbc
  - REPO=bnoordhuis/node-profiler     # 2016-08-14
  - REPO=bnoordhuis/node-rusage       # 2013-04-09
  - REPO=bnoordhuis/node-syslog       # 2015-09-05 schamane/node-syslog
  - REPO=schamane/node-syslog
  - REPO=bnoordhuis/node-unix-dgram   # 2019-05-06
  - REPO=bnoordhuis/node-v8           # 2018-05-01 nodejs/node-v8
  - REPO=nodejs/node-v8
  - REPO=bnoordhuis/node_mdns         # 2017-10-02 agnat/node_mdns
  - REPO=agnat/node_mdns
  - REPO=bnoordhuis/omr-agentcore     # 2017-10-27 RuntimeTools/omr-agentcore
  - REPO=RuntimeTools/omr-agentcore
  - REPO=bnoordhuis/python-ntlm       # 2011-05-20
  - REPO=bnoordhuis/rust              # 2014-10-02 rust-lang/rust
  - REPO=rust-lang/rust
  - REPO=bnoordhuis/selene            # 2011-06-16 pquerna/selene
  - REPO=pquerna/selene
  - REPO=bnoordhuis/slimv             # 2015-09-15 kovisoft/slimv
  - REPO=kovisoft/slimv
  - REPO=bnoordhuis/smjs              # 2012-05-10
  - REPO=bnoordhuis/suv               # 2013-10-05
  - REPO=bnoordhuis/v8                # 2017-12-09 objcode/v8
  - REPO=objcode/v8
  - REPO=bnoordhuis/v8-git-mirror     # 2015-05-19 v8/v8
  - REPO=v8/v8
  - REPO=bnoordhuis/v8.rs             # 2018-02-13
  - REPO=bnoordhuis/vime              # 2016-11-30
install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F72,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
