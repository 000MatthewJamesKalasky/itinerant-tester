group: travis_latest
os: linux
dist: bionic
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  #- 3.7
  - 3.8
jobs:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=plotly/canvas-gallery        # 2019-03-19 emmanuelle/canvas-gallery
  - REPO=emmanuelle/canvas-gallery
  - REPO=plotly/canvas-portal         # 2020-02-08
  - REPO=plotly/colorlover            # 2020-02-10
  - REPO=plotly/dash                  # 2020-02-10
  - REPO=plotly/dash-alternative-viz  # 2019-12-13
  - REPO=plotly/dash-alternative-viz-demo  # 2019-06-08
  - REPO=plotly/dash-analytics-report  # 2017-09-14
  - REPO=plotly/dash-app-datasets     # 2017-09-04
  - REPO=plotly/dash-auth             # 2019-10-04
  - REPO=plotly/dash-bio              # 2020-02-09
  - REPO=plotly/dash-bio-utils        # 2019-11-19
  - REPO=plotly/dash-bk-precision     # 2019-10-21
  - REPO=plotly/dash-brain-surface-viewer  # 2019-10-21
  - REPO=plotly/dash-canvas           # 2020-02-13
  - REPO=plotly/dash-colorscales      # 2019-11-03
  - REPO=plotly/dash-component-boilerplate  # 2020-02-11
  - REPO=plotly/dash-components-archetype  # 2018-12-16
  - REPO=plotly/dash-core-components  # 2020-02-13
  - REPO=plotly/dash-cytoscape        # 2020-01-21
  - REPO=plotly/dash-dangerously-set-inner-html  # 2018-12-28
  - REPO=plotly/dash-daq              # 2020-01-23
  - REPO=plotly/dash-daq-accelerometer  # 2019-02-18
  - REPO=plotly/dash-daq-iv-tracer    # 2019-07-13
  - REPO=plotly/dash-daq-keithley2400  # 2019-01-17
  - REPO=plotly/dash-daq-led-control  # 2019-02-20
  - REPO=plotly/dash-daq-manufacturing-demo  # 2019-03-13
  - REPO=plotly/dash-daq-monorepo     # 2019-01-27
  - REPO=plotly/dash-daq-omega-pid    # 2019-02-20
  - REPO=plotly/dash-daq-pressure-gauge-kjl  # 2019-04-18
  - REPO=plotly/dash-daq-robotic-arm-edge  # 2019-02-20
  - REPO=plotly/dash-daq-satellite-dashboard  # 2019-06-11
  - REPO=plotly/dash-daq-sparki       # 2019-02-20
  - REPO=plotly/dash-daq-stepper-motor  # 2019-02-20
  - REPO=plotly/dash-datashader       # 2019-05-30
  - REPO=plotly/dash-deploy           # 2018-08-03
  - REPO=plotly/dash-deployment-server-kerberos  # 2019-01-23
  - REPO=plotly/dash-diamond-explorer  # 2019-10-21
  - REPO=plotly/dash-docs             # 2020-02-13
  - REPO=plotly/dash-enterprise-auth  # 2020-02-06
  - REPO=plotly/dash-extra-components  # 2019-12-13
  - REPO=plotly/dash-flow-example     # 2019-01-17
  - REPO=plotly/dash-hello-world      # 2019-10-21
  - REPO=plotly/dash-heroku-template  # 2017-06-20
  - REPO=plotly/dash-html-components  # 2020-01-10
  - REPO=plotly/dash-image-processing  # 2019-11-03
  - REPO=plotly/dash-network          # 2018-10-29
  - REPO=plotly/dash-oil-and-gas-demo  # 2019-06-25
  - REPO=plotly/dash-on-bluemix       # 2018-12-16 IBM-Cloud/get-started-python
  - REPO=IBM-Cloud/get-started-python
  - REPO=plotly/dash-on-premise-sample-app  # 2020-02-10
  - REPO=plotly/dash-on-premise-sample-flask-app  # 2019-10-21
  - REPO=plotly/dash-opioid-epidemic-demo  # 2019-10-21
  - REPO=plotly/dash-oracle-demo      # 2018-09-10
  - REPO=plotly/dash-pdf-generation-demo  # 2019-10-21
  - REPO=plotly/dash-player           # 2019-12-13
  - REPO=plotly/dash-px               # 2019-10-20
  - REPO=plotly/dash-pyodbc-demo      # 2018-09-10
  - REPO=plotly/dash-recession-report-demo  # 2019-10-21
  - REPO=plotly/dash-recipes          # 2019-11-05
  - REPO=plotly/dash-redis-celery-periodic-updates  # 2019-10-21
  - REPO=plotly/dash-redis-demo       # 2019-10-21
  - REPO=plotly/dash-regression       # 2018-08-28
  - REPO=plotly/dash-renderer         # 2019-11-01
  - REPO=plotly/dash-renderer-test-components  # 2019-04-20
  - REPO=plotly/dash-salesforce-crm   # 2019-10-21
  - REPO=plotly/dash-sample-apps      # 2020-02-13
  - REPO=plotly/dash-sqlite-uber-rides-demo  # 2017-07-07
  - REPO=plotly/dash-stock-tickers-demo-app  # 2019-10-22
  - REPO=plotly/dash-sunburst         # 2018-10-29
  - REPO=plotly/dash-svm              # 2019-05-16
  - REPO=plotly/dash-table            # 2020-02-13
  - REPO=plotly/dash-technical-charting  # 2018-03-02
  - REPO=plotly/dash-tektronix-350    # 2019-07-23
  - REPO=plotly/dash-volatility-surface  # 2018-03-02
  - REPO=plotly/dash-world-cell-towers  # 2020-01-21
  - REPO=plotly/dash-yield-curve      # 2019-01-17
  - REPO=plotly/dashboards.ly         # 2018-12-11
  - REPO=plotly/dashR                 # 2020-02-13
  - REPO=plotly/dash_growth_chart     # 2019-10-21
  - REPO=plotly/dds-api-docs          # 2020-02-11
  - REPO=plotly/docs-demos-dashbio    # 2019-11-15
  - REPO=dokku/dokku
  - REPO=plotly/dokku-acl             # 2020-02-07
  - REPO=plotly/falcon                # 2019-12-28
  - REPO=plotly/fdb-vector            # 2015-01-11
  - REPO=plotly/gql                   # 2019-02-19 cw1427/gql
  - REPO=cw1427/gql
  - REPO=plotly/graphing-library-docs  # 2020-02-12
  - REPO=plotly/heroku-buildpack-r    # 2020-02-13 virtualstaticvoid/heroku-buildpack-r
  - REPO=virtualstaticvoid/heroku-buildpack-r
  - REPO=plotly/herokuish-fork        # 2019-03-14 gliderlabs/herokuish
  - REPO=gliderlabs/herokuish
  - REPO=plotly/ideogram              # 2019-07-23 eweitz/ideogram
  - REPO=eweitz/ideogram
  - REPO=plotly/Igor-Pro-Graph-Converter  # 2019-10-08
  - REPO=plotly/IPython-plotly        # 2016-06-02
  - REPO=plotly/jupyterlab-dash       # 2019-12-18
  - REPO=plotly/le-bot                # 2019-03-05
  - REPO=plotly/learn-tutorials       # 2014-12-10
  - REPO=plotly/my-new-dash-app       # 2018-11-05
  - REPO=plotly/nbformat              # 2018-07-02 jupyter/nbformat
  - REPO=jupyter/nbformat
  - REPO=plotly/octogrid              # 2019-10-22
  - REPO=plotly/open-mining-format-omf  # 2019-12-06
  - REPO=plotly/orca                  # 2020-02-03
  - REPO=plotly/pileup.js             # 2019-06-04 hammerlab/pileup.js
  - REPO=hammerlab/pileup.js
  - REPO=plotly/plotly.py             # 2020-02-13
  - REPO=plotly/plotly.r-docs         # 2020-02-13
  - REPO=plotly/plotlyhtmlexporter    # 2018-01-20
  - REPO=plotly/plotlyjs-flask-example  # 2015-07-24
  - REPO=plotly/plotlylab             # 2019-05-29
  - REPO=plotly/plotly_express        # 2019-12-06
  - REPO=plotly/publisher             # 2018-12-06
  - REPO=plotly/pyladies-04-30-dashbio  # 2019-04-30
  - REPO=plotly/pytest-dash           # 2019-05-21
  - REPO=plotly/raspberrypi           # 2017-03-13
  - REPO=plotly/sample_dash_livy_spark  # 2018-08-14
  - REPO=plotly/simple-example-chart-apps  # 2019-11-03
  - REPO=plotly/workshop              # 2018-12-16
  - REPO=plotly/yes-plotly-host       # 2018-02-16
install:
  #- pip install -r requirements.txt
  - pip install codespell flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  - codespell . --ignore-words-list=ba,referer --skip=./.* --quiet-level=2 || true
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
