group: travis_latest
dist: xenial  # required for Python >= 3.7 (travis-ci/travis-ci#9069)
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=Esri/3d-cities-template      # 2014-12-08
  - REPO=Esri/adopta                  # 2018-05-22
  - REPO=Esri/ago-clone-items         # archived
  - REPO=Esri/ago-tools               # 2016-10-17
  - REPO=Esri/air-c2-cop-python       # 2017-08-10
  - REPO=Esri/arcgis-admin-python-scripts  # 2016-11-09
  - REPO=Esri/arcgis-cookbook         # 2019-06-27
  - REPO=Esri/arcgis-osm-editor       # 2019-06-11
  - REPO=Esri/arcgis-powershell-dsc   # 2019-06-28
  - REPO=Esri/arcgis-pro-sdk-community-samples  # 2019-06-26
  - REPO=Esri/arcgis-python-api       # 2019-06-28
  - REPO=Esri/Arcpy-sdk-analytics-examples  # 2019-03-06
  - REPO=Esri/arcpy-server-util-rest  # 2013-02-22 jasonbot/arcrest
  - REPO=jasonbot/arcrest
  - REPO=Esri/ArcREST                 # 2017-08-28
  - REPO=Esri/assimp                  # 2019-06-30 assimp/assimp
  - REPO=assimp/assimp
  - REPO=Esri/cameo-import-tool       # 2019-05-31
  - REPO=Esri/Catch2                  # 2019-05-14 catchorg/Catch2
  - REPO=catchorg/Catch2
  - REPO=Esri/collector-integration   # 2017-10-24
  - REPO=Esri/collector-tools         # 2019-04-29
  - REPO=Esri/community-addresses-python  # 2016-09-26
  - REPO=Esri/community-parcels-python  # 2016-09-26
  - REPO=Esri/conferences_resources   # 2019-03-15
  - REPO=Esri/cppcheck                # 2019-06-30 danmar/cppcheck
  - REPO=danmar/cppcheck
  - REPO=Esri/create-updm-geodatabase-tool  # 2019-05-02
  - REPO=Esri/crowdsource-reporter-scripts  # 2019-04-12
  - REPO=Esri/CTM                     # 2018-06-26
  - REPO=Esri/data-assistant          # 2017-10-24
  - REPO=Esri/defense-solutions-feature-toolbox  # 2017-11-22
  - REPO=Esri/defense-solutions-proofs-of-concept  # 2018-09-07
  - REPO=Esri/developer-support       # 2018-11-02
  - REPO=Esri/ecological-marine-unit-android  # 2018-07-10
  - REPO=Esri/elevation-gp-python     # 2016-10-31
  - REPO=Esri/environmental-impact    # 2018-04-03
  - REPO=Esri/environmental-impact-tools  # 2018-07-03
  - REPO=Esri/executive-dashboard     # 2018-03-28
  - REPO=Esri/explorer-integration    # 2018-02-16
  - REPO=Esri/gdal                    # 2019-06-30 OSGeo/gdal
  - REPO=OSGeo/gdal
  - REPO=Esri/geoenrichment-samples   # 2019-02-28
  - REPO=Esri/geoint-in-motion        # 2017-09-19 ngageoint/geoint-in-motion
  - REPO=ngageoint/geoint-in-motion
  - REPO=Esri/geoportal-server-catalog  # 2019-06-24
  - REPO=Esri/geoprocessing-tools-for-hadoop  # 2019-01-03
  - REPO=Esri/geotrigger-python       # 2014-02-13
  - REPO=Esri/gis-stat-analysis-py-tutor  # 2018-07-06
  - REPO=Esri/glad                    # 2019-06-30 Dav1dde/glad
  - REPO=Dav1dde/glad
  - REPO=Esri/gptools-for-aws         # 2013-11-08
  - REPO=Esri/hermes                  # 2017-04-25
  - REPO=Esri/icu                     # 2019-06-30 unicode-org/icu
  - REPO=unicode-org/icu
  - REPO=Esri/incident-import-tools   # 2019-06-20
  - REPO=Esri/insights-scripting-guide  # 2019-06-24
  - REPO=Esri/interop-examples-python  # 2013-05-29 jasonbot/devsummit2011
  - REPO=jasonbot/devsummit2011
  - REPO=Esri/lerc                    # 2019-06-30
  - REPO=Esri/libexpat                # 2019-06-30 libexpat/libexpat
  - REPO=libexpat/libexpat
  - REPO=Esri/libgit2                 # 2019-06-30 libgit2/libgit2
  - REPO=libgit2/libgit2
  - REPO=Esri/llvm-project            # 2019-01-15 llvm/llvm-project
  - REPO=llvm/llvm-project
  - REPO=Esri/llvm-project-20170507   # 2019-01-15 llvm-project/llvm-project-20170507
  - REPO=llvm-project/llvm-project-20170507
  - REPO=Esri/maritime-charting-sample-scripts  # 2017-07-21
  - REPO=Esri/mdcs-py                 # 2019-06-18
  - REPO=Esri/military-features-data  # 2019-04-05
  - REPO=Esri/military-symbology      # 2019-06-28
  - REPO=Esri/military-tools-geoprocessing-toolbox  # 2019-06-28
  - REPO=Esri/navigator-integration   # 2017-05-02
  - REPO=Esri/network-analysis-services  # 2017-06-07
  - REPO=Esri/opencv                  # 2016-09-02 opencv/opencv
  - REPO=opencv/opencv
  - REPO=Esri/ops-server-config       # 2016-10-19
  - REPO=Esri/OptimizeRasters         # 2019-06-17
  - REPO=Esri/overwrite-hosted-features  # 2019-04-08
  - REPO=Esri/palladio                # 2019-06-28
  - REPO=Esri/performance-test-harness-for-geoevent  # 2017-04-17
  - REPO=Esri/photo-survey            # 2019-05-16
  - REPO=Esri/portalpy                # 2017-09-25
  - REPO=Esri/product-on-demand       # 2015-11-04
  - REPO=Esri/protobuf                # 2019-06-30 protocolbuffers/protobuf
  - REPO=protocolbuffers/protobuf
  - REPO=Esri/public-transit-tools    # 2019-06-27
  - REPO=Esri/PySAL-ArcGIS-Toolbox    # 2019-06-28
  - REPO=Esri/python-toolbox-for-rapid  # 2016-11-30
  - REPO=Esri/R-toolbox-py            # 2015-08-03
  - REPO=Esri/raster-deep-learning    # 2019-05-17
  - REPO=Esri/raster-functions        # 2019-05-31
  - REPO=Esri/raster-tiles-compactcache  # 2018-09-04
  - REPO=Esri/raster-types            # 2017-04-23
  - REPO=Esri/raster2gpkg             # 2017-10-17
  - REPO=Esri/site-selector           # 2019-03-25
  - REPO=Esri/skia                    # 2019-06-24 google/skia
  - REPO=google/skia
  - REPO=Esri/solutions-geoevent-java  # 2018-02-22
  - REPO=Esri/solutions-geoprocessing-toolbox  # 2018-08-09
  - REPO=Esri/solutions-raster-functions  # 2016-09-13
  - REPO=Esri/state-of-the-data       # 2017-09-19 ngageoint/state-of-the-data
  - REPO=ngageoint/state-of-the-data
  - REPO=Esri/tbx-pyt-translator      # 2015-05-29 jasonbot/tbxtopyt
  - REPO=jasonbot/tbxtopyt
  - REPO=Esri/transportation-safety-tools  # 2018-07-16
  - REPO=Esri/utilities-solution-data-automation  # 2019-06-08
  - REPO=Esri/webhdfs-py              # 2015-02-13 drelu/webhdfs-py
  - REPO=drelu/webhdfs-py
  - REPO=Esri/webhooks-samples        # 2019-05-30
  - REPO=Esri/weighted-raster-overlay-service-toolbox  # 2018-01-08
  - REPO=Esri/workflowmanager-admin-tools  # 2017-04-26
  - REPO=Esri/workflowmanager-samples  # 2018-11-13
  - REPO=Esri/workforce-scripts       # 2019-06-27
  - REPO=Esri/yaml-cpp                # 2019-06-30 jbeder/yaml-cpp
  - REPO=jbeder/yaml-cpp  
install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
