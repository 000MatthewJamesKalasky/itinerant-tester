group: travis_latest
dist: xenial  # This should NOT be needed anymore
language: go
env:
  - REPO=googleapi/google-api-go-client
  - REPO=googleapi/gapic-generator-go
  - REPO=googleapi/google-cloud-go
  - REPO=googleapi/conformance-tests
  - REPO=googleapi/gapic-config-validator
  - REPO=googleapi/api-linter
  - REPO=googleapi/gapic-showcase
  - REPO=googleapi/grpc-fallback-go
  - REPO=googleapi/gnostic-go-generator
  - REPO=googleapi/gax-go
  - REPO=googleapi/google-cloud-go-testing
install:
  - curl -sfL https://install.goreleaser.com/github.com/golangci/golangci-lint.sh | sh -s -- -b $(go env GOPATH)/bin latest
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - golangci-lint --version
  - golangci-lint run
