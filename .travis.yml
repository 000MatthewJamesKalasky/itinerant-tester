group: travis_latest
dist: xenial  # required for Python >= 3.7 (travis-ci/travis-ci#9069)
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=AutoAI/cockroach-brain       # 2015-09-21
  - REPO=AutoAI/experiments           # 2016-01-07
  - REPO=AutoAI/neural-networks       # 2015-10-20
  - REPO=AutoAI/sandbox               # 2015-07-15
  - REPO=epfl-labos/chaos             # 2016-03-14
  - REPO=epfl-labos/DSS               # 2018-04-18
  - REPO=epfl-labos/eagle             # 2019-01-16
  - REPO=epfl-labos/TRIAD             # 2017-07-13
  - REPO=epfl-labos/x-stream          # 2018-01-16
  - REPO=epfl-idevelop/amm            # 2017-05-03
  - REPO=epfl-idevelop/ansible-module-eyaml  # 2019-04-01
  - REPO=epfl-idevelop/ansible-module-openshift  # 2019-05-17
  - REPO=GregLeBarbar/dj-pagination
  - REPO=jjkester/django-auditlog
  - REPO=jazzband/django-authority
  - REPO=django-ckeditor/django-ckeditor
  - REPO=epfl-idevelop/django-epfl-utils  # 2017-03-18
  - REPO=epfl-idevelop/django-tequila  # 2019-06-11
  - REPO=epfl-idevelop/elasticscience  # 2017-07-21
  - REPO=epfl-idevelop/epfl-ldap      # 2018-01-10
  - REPO=epfl-idevelop/gdpr_digger    # 2018-06-05
  - REPO=epfl-idevelop/gitchangelog.rc  # 2017-11-28
  - REPO=epfl-idevelop/homepage-archiveweb.epfl.ch  # 2019-04-03
  - REPO=epfl-idevelop/infoscience-exports  # 2018-05-25
  - REPO=epfl-idevelop/infoscience-exports-QA  # 2018-05-25
  - REPO=epfl-idevelop/infoscience-parser  # 2017-03-29
  - REPO=epfl-idevelop/invenio-infoscience  # 2018-01-22 inveniosoftware/invenio
  - REPO=inveniosoftware/invenio
  - REPO=epfl-idevelop/jahia2wp       # 2019-06-24
  - REPO=epfl-idevelop/jahiap         # 2018-02-21
  - REPO=epfl-idevelop/majority-report  # 2017-09-08
  - REPO=epfl-idevelop/miniscience    # 2017-07-19
  - REPO=epfl-idevelop/pysnow-change  # 2019-06-14
  - REPO=epfl-idevelop/python-rotate-backups  # 2019-01-23 xolox/python-rotate-backups
  - REPO=xolox/python-rotate-backups
  - REPO=epfl-idevelop/python-wordpress-json  # 2018-11-21 stylight/python-wordpress-json
  - REPO=stylight/python-wordpress-json
  - REPO=mvantellingen/python-zeep
  - REPO=epfl-idevelop/ressenti       # 2019-04-30 epfl-sdf/ressenti
  - REPO=epfl-sdf/ressenti
  - REPO=epfl-idevelop/wp-jira-toolbox  # 2019-06-03
  - REPO=epfl-idevelop/wp-ops         # 2019-06-12
  - REPO=epfl-idevelop/xaas-admin     # 2019-06-24
  - REPO=epfml/autoTrain              # 2019-03-15
  - REPO=epfml/ChocoSGD               # 2019-06-07
  - REPO=epfml/cola                   # 2019-01-20
  - REPO=epfml/error-feedback-SGD     # 2019-05-13
  - REPO=epfml/ML_course              # 2019-02-08
  - REPO=epfml/opt-shortcourse        # 2017-10-29
  - REPO=epfml/OptML_course           # 2019-05-24
  - REPO=epfml/powersgd               # 2019-06-15
  - REPO=epfml/sent2vec               # 2019-06-03
  - REPO=epfml/sparsifiedSGD          # 2018-10-25
  - REPO=epfl-lasa/adaptive_polishing  # 2018-02-01
  - REPO=epfl-lasa/allegro-hand-ros-kinetic  # 2019-03-06 yias/allegro-hand-ros-kinetic
  - REPO=yias/allegro-hand-ros-kinetic
  - REPO=nisommer/allegro_hand_ros
  - REPO=epfl-lasa/allegro_opposition_primitives  # 2016-08-24
  - REPO=RobotnikAutomation/barrett_hand
  - REPO=kevingkim/bimanual-catching-coman
  - REPO=epfl-lasa/bimanual-task-motion-planning  # 2018-10-11
  - REPO=epfl-lasa/changepoint-detection  # 2017-07-14
  - REPO=epfl-lasa/conveyor_belt_ros  # 2017-07-28
  - REPO=epfl-lasa/demo-voice-control  # 2018-09-14
  - REPO=epfl-lasa/ds_motion_generator  # 2019-06-20
  - REPO=epfl-lasa/dynamic_obstacle_avoidance_linear  # 2019-05-31
  - REPO=epfl-lasa/easy-kinesthetic-recording  # 2018-09-14 nbfigueroa/easy-kinesthetic-recording
  - REPO=nbfigueroa/easy-kinesthetic-recording
  - REPO=epfl-lasa/ensemble_ioc       # 2016-11-17
  - REPO=epfl-lasa/foot_surgical_robot  # 2017-10-25
  - REPO=epfl-lasa/force_based_ds_modulation  # 2019-02-27
  - REPO=MiaoLi/GPIS
  - REPO=epfl-lasa/hasler_project     # 2019-02-05
  - REPO=epfl-lasa/icra19-lfd-tutorial-exercises  # 2019-05-24
  - REPO=epfl-lasa/icub-ds-walking    # 2019-04-09
  - REPO=epfl-lasa/IIWA_IK_interface  # 2019-02-28
  - REPO=epfl-lasa/iiwa_ros           # 2019-06-14
  - REPO=epfl-lasa/industrial_core    # 2019-01-28 OrebroUniversity/industrial_core
  - REPO=OrebroUniversity/industrial_core
  - REPO=epfl-lasa/inverse-kinematics-examples  # 2016-07-11
  - REPO=epfl-lasa/IRL_with_dynamical_system  # 2019-05-28 WSPeng/IRL_with_dynamical_system
  - REPO=WSPeng/IRL_with_dynamical_system
  - REPO=epfl-lasa/JT-DS-Learning     # 2018-05-15
  - REPO=epfl-lasa/kuka-lwr-ros       # 2019-02-15
  - REPO=epfl-lasa/kuka-record-and-replay  # 2016-01-12
  - REPO=epfl-lasa/kuka-rviz-simulation  # 2018-12-19
  - REPO=epfl-lasa/ML_toolbox         # 2018-05-14
  - REPO=epfl-lasa/mouse_perturbation_robot  # 2018-05-02
  - REPO=epfl-lasa/nl-dynamics        # 2016-08-31
  - REPO=epfl-lasa/obstacleAvoidance_Cpp  # 2019-06-14
  - REPO=epfl-lasa/obstacleAvoidance_python  # 2019-02-18
  - REPO=epfl-lasa/opensim_server     # 2019-05-10
  - REPO=epfl-lasa/optoforce          # 2019-01-31 shadow-robot/optoforce
  - REPO=shadow-robot/optoforce
  - REPO=epfl-lasa/organizing_obj_task_motion_planner  # 2016-08-08
  - REPO=epfl-lasa/PI2_GMM            # 2017-05-12
  - REPO=MiaoLi/ProbHandIK
  - REPO=epfl-lasa/ridgeback_ur5_controller  # 2019-03-12
  - REPO=epfl-lasa/Robot-kinematic    # 2019-02-05
  - REPO=epfl-lasa/robot-toolkit      # 2017-11-03
  - REPO=epfl-lasa/robot-voice-control  # 2016-05-02
  - REPO=epfl-lasa/robot_controllers  # 2019-05-04
  - REPO=epfl-lasa/ros-boilerplate    # 2017-07-25 felixduvallet/ros-boilerplate
  - REPO=felixduvallet/ros-boilerplate
  - REPO=epfl-lasa/ros-tf-utils       # 2017-07-25 felixduvallet/ros-tf-utils
  - REPO=felixduvallet/ros-tf-utils
  - REPO=epfl-lasa/rospyconsole       # 2016-04-15
  - REPO=epfl-lasa/SAHR_bifurcation   # 2019-06-05
  - REPO=epfl-lasa/soft_grasping      # 2016-06-30 MiaoLi/soft_grasping
  - REPO=MiaoLi/soft_grasping
  - REPO=epfl-lasa/syntouchpublisher  # 2016-06-29
  - REPO=epfl-lasa/task-motion-planning-cds  # 2017-05-08 nbfigueroa/task_motion_planning_cds
  - REPO=nbfigueroa/task_motion_planning_cds
  - REPO=epfl-lasa/task_adaptation    # 2019-05-15
  - REPO=epfl-lasa/throwing-robot     # 2016-07-19
  - REPO=epfl-lasa/ur_modern_driver   # 2017-04-25 ros-industrial/ur_modern_driver
  - REPO=ros-industrial/ur_modern_driver
  - REPO=epfl-lasa/user_performance_data  # 2018-04-23 alpais/user_performance_data
  - REPO=alpais/user_performance_data
  - REPO=epfl-lasa/user_performance_estimation  # 2018-04-23 alpais/user_performance_estimation
  - REPO=alpais/user_performance_estimation
  - REPO=epfl-lasa/wheelchair-ds-motion  # 2018-10-25
  - REPO=epfl-lasa/YUMI_IK_Solver     # 2019-01-30

install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F72,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
