group: travis_latest
dist: bionic
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=GoogleCloudPlatform/hackathon-toolkit  # 2019-08-15
  - REPO=GoogleCloudPlatform/healthcare  # 2019-08-20
  - REPO=GoogleCloudPlatform/healthcare-deid  # 2019-07-23
  - REPO=GoogleCloudPlatform/hellodashboard  # 2014-07-03
  - REPO=GoogleCloudPlatform/hpc-monte-carlo  # 2019-03-01
  - REPO=GoogleCloudPlatform/httplib2shim  # 2018-12-18
  - REPO=GoogleCloudPlatform/iap-connector  # 2019-06-20
  - REPO=GoogleCloudPlatform/instruqt-content  # 2019-07-01
  - REPO=GoogleCloudPlatform/ios-docs-samples  # 2019-08-16
  - REPO=GoogleCloudPlatform/iot-core-load-test-python  # 2018-11-16
  - REPO=GoogleCloudPlatform/iot-core-micropython  # 2019-07-09
  - REPO=GoogleCloudPlatform/iot-device-sdk-embedded-c  # 2019-08-19
  - REPO=GoogleCloudPlatform/iot-hexspider-esp8266  # 2018-11-30
  - REPO=GoogleCloudPlatform/IoT-Icebreaker  # 2016-07-28
  - REPO=GoogleCloudPlatform/ipython-soccer-predictions  # archived
  - REPO=GoogleCloudPlatform/istio-samples  # 2019-07-11
  - REPO=GoogleCloudPlatform/java-docs-samples  # 2019-08-20
  - REPO=GoogleCloudPlatform/k8s-addon-builder  # 2019-07-23
  - REPO=GoogleCloudPlatform/k8s-cloudkms-plugin  # 2019-04-26
  - REPO=GoogleCloudPlatform/k8s-cluster-bundle  # 2019-07-25
  - REPO=GoogleCloudPlatform/k8s-node-termination-handler  # 2019-05-07
  - REPO=GoogleCloudPlatform/k8s-stackdriver  # 2019-08-09
  - REPO=GoogleCloudPlatform/keras-idiomatic-programmer  # 2019-08-19
  - REPO=GoogleCloudPlatform/keyrotator  # 2019-05-23
  - REPO=GoogleCloudPlatform/konlet   # 2018-10-22
  - REPO=GoogleCloudPlatform/kubernetes-bigquery-python  # 2018-07-11
  - REPO=GoogleCloudPlatform/kubernetes-engine-samples  # 2019-08-08
  - REPO=GoogleCloudPlatform/layer-definitions  # 2019-08-20
  - REPO=GoogleCloudPlatform/lb-app-capacity-tutorial-python  # 2018-01-22
  - REPO=GoogleCloudPlatform/logging-with-stackdriver  # 2017-09-13
  - REPO=GoogleCloudPlatform/magic-modules  # 2019-08-20
  - REPO=GoogleCloudPlatform/marketplace-k8s-app-tools  # 2019-08-20
  - REPO=GoogleCloudPlatform/marketplace-testrunner  # 2019-02-15
  - REPO=GoogleCloudPlatform/marketplace-vm-imagebuilder  # 2019-08-15
  - REPO=GoogleCloudPlatform/microservices-demo  # 2019-08-19
  - REPO=GoogleCloudPlatform/mimus-game-simulator  # 2018-01-10
  - REPO=GoogleCloudPlatform/MiniCat  # 2018-01-08
  - REPO=GoogleCloudPlatform/ml-on-gcp  # 2019-08-20
  - REPO=GoogleCloudPlatform/mllp     # 2019-08-08
  - REPO=GoogleCloudPlatform/next18-ai-in-motion  # 2019-05-15
  - REPO=GoogleCloudPlatform/oldisim  # 2018-01-08
  - REPO=GoogleCloudPlatform/oozie-to-airflow  # 2019-08-16
  - REPO=GoogleCloudPlatform/PerfKitBenchmarker  # 2019-08-20
  - REPO=GoogleCloudPlatform/PerfKitExplorer  # 2018-07-26
  - REPO=GoogleCloudPlatform/plspm-python  # 2019-05-01
  - REPO=GoogleCloudPlatform/policyscanner  # archived
  - REPO=GoogleCloudPlatform/prediction-appengine-guestbook-python  # archived
  - REPO=GoogleCloudPlatform/prediction-try-java-python  # 2018-01-19
  - REPO=GoogleCloudPlatform/professional-services  # 2019-08-20
  - REPO=GoogleCloudPlatform/psq      # 2019-08-19
  - REPO=GoogleCloudPlatform/pubsub   # 2019-08-20
  - REPO=GoogleCloudPlatform/pubsub-shout-csharp  # 2016-07-12
  - REPO=GoogleCloudPlatform/pubsubbeat  # 2019-07-23
  - REPO=GoogleCloudPlatform/python-compat-runtime  # archived
  - REPO=GoogleCloudPlatform/python-docs-samples  # 2019-08-20
  - REPO=GoogleCloudPlatform/python-repo-tools  # 2018-06-29
  - REPO=GoogleCloudPlatform/python-runtime  # 2019-04-08
  - REPO=GoogleCloudPlatform/raspberrypi-docs-samples  # 2019-07-05
  - REPO=GoogleCloudPlatform/rcloadenv  # 2017-12-05
  - REPO=GoogleCloudPlatform/realtime-embeddings-matching  # 2019-04-12
  - REPO=GoogleCloudPlatform/reliable-task-scheduling-compute-engine-sample  # 2019-06-21
  - REPO=GoogleCloudPlatform/repository-gardener  # 2019-06-22
  - REPO=GoogleCloudPlatform/runtimes-common  # 2019-06-27
  - REPO=GoogleCloudPlatform/serverless-game-contest  # 2019-08-19
  - REPO=GoogleCloudPlatform/serverless-store-demo  # 2019-07-10
  - REPO=GoogleCloudPlatform/solutions-gcs-bq-streaming-functions-python  # 2019-02-16
  - REPO=GoogleCloudPlatform/solutions-google-compute-engine-cluster-for-hadoop  # 2018-01-09
  - REPO=GoogleCloudPlatform/solutions-google-compute-engine-cluster-for-jmeter  # 2016-09-20
  - REPO=GoogleCloudPlatform/solutions-load-balanced-gaming-server-on-google-compute-engine  # 2018-06-05
  - REPO=GoogleCloudPlatform/solutions-orchestrator-android-sampleapp-smashpix  # 2013-12-04
  - REPO=GoogleCloudPlatform/solutions-serverless-web-monitoring  # 2019-06-19
  - REPO=GoogleCloudPlatform/Solutions-Using-ETL-tool-on-Google-Compute-Engine  # 2014-03-06
  - REPO=GoogleCloudPlatform/solutions-vision-search  # 2019-05-06
  - REPO=GoogleCloudPlatform/SourceXCloud  # 2015-03-30
  - REPO=GoogleCloudPlatform/spark-recommendation-engine  # 2018-10-07
  - REPO=GoogleCloudPlatform/stackdriver-ansible-role  # 2018-03-30
  - REPO=GoogleCloudPlatform/stackdriver-metrics-export  # 2019-07-05
  - REPO=GoogleCloudPlatform/stackdriver-sandbox  # 2019-08-01
  - REPO=GoogleCloudPlatform/storage-file-transfer-json-python  # 2017-03-01
  - REPO=GoogleCloudPlatform/storage-sdrs  # 2019-08-07
  - REPO=GoogleCloudPlatform/storage-signedurls-python  # 2019-02-19
  - REPO=GoogleCloudPlatform/tensorflow-inference-tensorrt5-t4-gpu  # 2019-01-23
  - REPO=GoogleCloudPlatform/tensorflow-lifetime-value  # 2019-06-19
  - REPO=GoogleCloudPlatform/tensorflow-object-detection-example  # 2018-11-20
  - REPO=GoogleCloudPlatform/tensorflow-recommendation-wals  # 2019-03-18
  - REPO=GoogleCloudPlatform/tensorflow-sketch-rnn-example  # 2017-10-27
  - REPO=GoogleCloudPlatform/tensorflow-without-a-phd  # 2019-08-05
  - REPO=GoogleCloudPlatform/terraform-pci-starter  # 2019-08-20
  - REPO=GoogleCloudPlatform/terraform-python-testing-helper  # 2019-03-29
  - REPO=GoogleCloudPlatform/tf-estimator-tutorials  # 2019-06-07
  - REPO=GoogleCloudPlatform/titan    # 2015-10-03
  - REPO=GoogleCloudPlatform/training-data-analyst  # 2019-08-20
  - REPO=GoogleCloudPlatform/ubbagent  # 2019-05-16
  - REPO=GoogleCloudPlatform/unstructured-text-demo  # 2017-09-29
  - REPO=GoogleCloudPlatform/vision-how-happy-python  # 2019-04-15
  - REPO=GoogleCloudPlatform/webapp2  # 2019-08-02
  
install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
