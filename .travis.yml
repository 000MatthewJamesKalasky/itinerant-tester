group: travis_latest
os: linux
dist: focal
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  #- 3.7
  - 3.8
jobs:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=PortSwigger/activation-script  # 2018-01-19
  - REPO=PortSwigger/active-scan-plus-plus  # 2019-11-27 albinowax/ActiveScanPlusPlus
  - REPO=PortSwigger/add-custom-header  # 2020-01-16 lorenzog/burpAddCustomHeader
  - REPO=PortSwigger/add-track-custom-issues  # 2020-03-03 jamesm0rr1s/BurpSuite-Add-and-Track-Custom-Issues
  - REPO=PortSwigger/additional-csrf-checks  # 2018-12-14 0ang3el/EasyCSRF
  - REPO=PortSwigger/additional-scanner-checks  # 2018-12-21 thomaspatzke/Burp-MissingScannerChecks
  - REPO=PortSwigger/anti-csrf-token-from-referer  # 2020-02-28 CompassSecurity/anti-csrf-token-from-referer
  - REPO=PortSwigger/asset-discovery  # 2019-09-12 redhuntlabs/BurpSuite-Asset_Discover
  - REPO=PortSwigger/auth-matrix      # 2018-02-05 SecurityInnovation/AuthMatrix
  - REPO=PortSwigger/autorize         # 2020-03-17 Quitten/Autorize
  - REPO=PortSwigger/aws-security-checks  # 2018-01-18
  - REPO=PortSwigger/brida            # 2020-05-18 federicodotta/Brida
  - REPO=PortSwigger/broken-link-hijacking  # 2019-07-23 arbazkiraak/BurpBLH
  - REPO=PortSwigger/browser-repeater  # 2017-02-13 allfro/browserRepeater
  - REPO=PortSwigger/burp-beautifier  # 2019-12-16 Ovi3/BurpBeautifier
  - REPO=PortSwigger/burp-smart-buster  # 2018-01-22 pathetiq/BurpSmartBuster
  - REPO=PortSwigger/burp-subdomain   # 2019-12-02 Regala/burp-subdomains
  - REPO=PortSwigger/burpelfish       # 2018-11-21 bao7uo/BurpelFish
  - REPO=PortSwigger/bypass-waf       # 2020-05-19 codewatchorg/bypasswaf
  - REPO=PortSwigger/carbonator       # 2017-02-13 integrissecurity/carbonator
  - REPO=PortSwigger/cloud-storage-tester  # 2017-09-21 VirtueSecurity/aws-extender
  - REPO=PortSwigger/cookie-decrypter  # 2019-07-12 SolomonSklash/cookie-decrypter
  - REPO=PortSwigger/crypto-attacker  # 2017-02-13 webstersprodigy/webstersprodigy
  - REPO=PortSwigger/csp-bypass       # 2017-02-13 moloch--/CSP-Bypass
  - REPO=PortSwigger/cstc             # 2020-05-20 usdAG/cstc
  - REPO=PortSwigger/custom-deserializer  # 2017-02-13 marcotinari/CustomDeserializer
  - REPO=PortSwigger/custom-logger    # 2017-03-18
  - REPO=PortSwigger/custom-parameter-handler  # 2019-04-10 elespike/burp-cph
  - REPO=PortSwigger/defect-dojo      # 2019-06-05 DefectDojo/Burp-Plugin
  - REPO=PortSwigger/detect-dynamic-js  # 2018-12-17 luh2/DetectDynamicJS
  - REPO=PortSwigger/diff-jam         # 2020-02-23 brettgervasoni/diffJAM
  - REPO=PortSwigger/discovering-reversetabnabbing  # 2019-12-06 GabsJahBless/discovering-reversetabnabbing
  - REPO=PortSwigger/elastic-burp     # 2018-10-25 thomaspatzke/WASE
  - REPO=PortSwigger/example-custom-editor-tab  # 2017-02-23
  - REPO=PortSwigger/example-custom-logger  # 2017-03-04
  - REPO=PortSwigger/example-custom-scan-insertion-points  # 2017-03-08
  - REPO=PortSwigger/example-custom-session-tokens  # 2017-04-20
  - REPO=PortSwigger/example-event-listeners  # 2017-02-23
  - REPO=PortSwigger/example-hello-world  # 2017-02-23
  - REPO=PortSwigger/example-intruder-payloads  # 2017-03-08
  - REPO=PortSwigger/example-scanner-checks  # 2017-02-23
  - REPO=PortSwigger/example-traffic-redirector  # 2017-02-23
  - REPO=PortSwigger/faraday_old      # 2018-08-02 infobyte/faraday
  - REPO=PortSwigger/filter-options-method  # 2020-01-08 capt-meelo/filter-options-method
  - REPO=PortSwigger/git-bridge       # 2017-02-13 jfoote/burp-git-bridge
  - REPO=PortSwigger/google-hack      # 2017-02-13 infodel/burp.extension-googlehack
  - REPO=PortSwigger/headers-analyzer  # 2017-02-13 Dionach/HeadersAnalyzer
  - REPO=PortSwigger/highlighter-and-extractor  # 2020-03-30 gh0stkey/HaE
  - REPO=PortSwigger/http-request-smuggler  # 2020-03-20
  - REPO=PortSwigger/httpoxy-scanner  # 2018-01-12
  - REPO=PortSwigger/identity-crisis  # 2017-02-13 EnableSecurity/Identity-Crisis
  - REPO=PortSwigger/inql             # 2020-06-03 doyensec/inql
  - REPO=PortSwigger/intruder-time-payloads  # 2017-06-14 WJDigby/current_epoch_time.py
  - REPO=PortSwigger/ip-rotate        # 2020-06-04 RhinoSecurityLabs/IPRotate_Burp_Extension
  - REPO=PortSwigger/irule-detector   # 2019-08-30 kugg/irule-detector
  - REPO=PortSwigger/js-link-finder   # 2019-09-05 InitRoot/BurpJSLinkFinder
  - REPO=PortSwigger/json-decoder     # 2020-02-18 carstein/burp-extensions
  - REPO=PortSwigger/json-js-beautifier  # 2019-10-01 Manjesh24/JSON-JS-Beautifier
  - REPO=PortSwigger/length-extension-attacks  # 2017-02-13 vergl4s/signatures
  - REPO=PortSwigger/lightbulb-framework  # 2018-01-22 lightbulb-framework/lightbulb-framework
  - REPO=PortSwigger/message-pack     # 2017-04-20 CyberDefenseInstitute/burp-msgpack
  - REPO=PortSwigger/mine-sweeper     # 2018-10-24 codingo/Minesweeper
  - REPO=PortSwigger/multi-browser-highlighting  # 2018-12-14 aurainfosec/burp-multi-browser-highlighting
  - REPO=PortSwigger/nginx-alias-traversal  # 2018-11-20 bayotop/off-by-slash
  - REPO=PortSwigger/nmap-parser      # 2017-02-13 infodel/burp.extension-nmap_parser
  - REPO=PortSwigger/office-open-xml-editor  # 2018-01-05 maxence-schmitt/OfficeOpenXMLEditor
  - REPO=PortSwigger/payload-parser   # 2017-02-13 infodel/burp.extension-payloadparser
  - REPO=PortSwigger/pdf-metadata     # 2017-04-20 luh2/PDFMetadata
  - REPO=PortSwigger/pentest-manager  # 2017-02-13 Quitten/PT-Manager
  - REPO=PortSwigger/peoplesoft-token-extractor  # 2019-07-23 CenturionInfoSec/pstoken-burp-plugin
  - REPO=PortSwigger/pip3line         # 2019-07-12 metrodango/pip3line
  - REPO=PortSwigger/progress-tracker  # 2020-03-04 dariusztytko/progress-burp
  - REPO=PortSwigger/protobuf-decoder  # 2020-02-13 dinosec/burp-protobuf-decoder
  - REPO=PortSwigger/proxy-action-rules  # 2020-03-03 jamesm0rr1s/BurpSuite-Active-AutoProxy
  - REPO=PortSwigger/python-scripter  # 2017-09-28
install:
  #- pip install -r requirements.txt
  - pip install codespell flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  - codespell . --ignore-words-list=ba,referer --skip=./.* --quiet-level=2 || true
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
