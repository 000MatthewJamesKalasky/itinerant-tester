group: travis_latest
dist: xenial  # This should NOT be needed anymore
language: go
env:
  - REPO=google-api-go-client
  - REPO=gapic-generator-go
  - REPO=google-cloud-go
  - REPO=conformance-tests
  - REPO=gapic-config-validator
  - REPO=api-linter
  - REPO=gapic-showcase
  - REPO=grpc-fallback-go
  - REPO=gnostic-go-generator
  - REPO=gax-go
  - REPO=google-cloud-go-testing
install:
  - curl -sfL https://install.goreleaser.com/github.com/golangci/golangci-lint.sh | sh -s -- -b $(go env GOPATH)/bin latest
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - golangci-lint --version
  - golangci-lint run
