group: travis_latest
dist: bionic
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=boneskull/alfred-npms        # 2017-01-18
  - REPO=pycampers/ampy
  - REPO=boneskull/Arduino            # 2018-01-26 esp8266/Arduino
  - REPO=esp8266/Arduino
  - REPO=boneskull/bonesible          # 2017-09-13
  - REPO=nodejs/build
  - REPO=boneskull/ci-dashboard       # 2018-10-10 ahmedelsayed-93/ci-dashboard
  - REPO=ahmedelsayed-93/ci-dashboard
  - REPO=adafruit/circuitpython
  - REPO=bendikro/deluge-iface-watch
  - REPO=boneskull/duktape            # 2018-02-12 svaarala/duktape
  - REPO=svaarala/duktape
  - REPO=facebook/flow
  - REPO=boneskull/glances            # 2019-06-20 nicolargo/glances
  - REPO=nicolargo/glances
  - REPO=grpc/grpc
  - REPO=redis/hiredis-node
  - REPO=rcmdnk/homebrew-file
  - REPO=homieiot/homie-esp8266
  - REPO=apache/openwhisk
  - REPO=amperka/ino
  - REPO=vlasovskikh/intellij-micropython
  - REPO=boneskull/iot-python         # 2017-07-24 ibm-watson-iot/iot-python
  - REPO=ibm-watson-iot/iot-python
  - REPO=boneskull/jerryscript        # 2017-08-02 jerryscript-project/jerryscript
  - REPO=jerryscript-project/jerryscript
  - REPO=boneskull/js.io              # 2013-07-26 gameclosure/js.io
  - REPO=gameclosure/js.io
  - REPO=boneskull/karma              # 2014-07-12 karma-runner/karma
  - REPO=karma-runner/karma
  - REPO=boneskull/lambda-addons      # 2015-11-03 pudis1977/lambda-addons
  - REPO=pudis1977/lambda-addons
  - REPO=boneskull/lastfm-api-decipherer  # 2013-03-10 claywsmith/lastfm-api-decipherer
  - REPO=claywsmith/lastfm-api-decipherer
  - REPO=boneskull/le                 # 2017-01-16 rapid7/le
  - REPO=rapid7/le
  - REPO=boneskull/licreator          # 2015-09-07 bezeredi/licreator
  - REPO=bezeredi/licreator
  - REPO=boneskull/micropython-lib    # 2017-09-13 micropython/micropython-lib
  - REPO=micropython/micropython-lib
  - REPO=boneskull/micropython-nmea   # 2017-09-25 Knio/pynmea2
  - REPO=Knio/pynmea2
  - REPO=boneskull/micropython-watson-iot  # 2018-01-24
  - REPO=boneskull/moddable           # 2019-06-30 Moddable-OpenSource/moddable
  - REPO=Moddable-OpenSource/moddable
  - REPO=boneskull/mongoose-os        # 2017-03-08 cesanta/mongoose-os
  - REPO=cesanta/mongoose-os
  - REPO=boneskull/node               # 2019-07-12 nodejs/node
  - REPO=nodejs/node
  - REPO=boneskull/node-fs-ext        # 2015-10-02 baudehlo/node-fs-ext
  - REPO=baudehlo/node-fs-ext
  - REPO=boneskull/node-red           # 2018-08-23 node-red/node-red
  - REPO=node-red/node-red
  - REPO=boneskull/node-red-nodes     # 2018-05-04 node-red/node-red-nodes
  - REPO=node-red/node-red-nodes
  - REPO=boneskull/node-serialport    # 2019-07-08 serialport/node-serialport
  - REPO=serialport/node-serialport
  - REPO=boneskull/OakCore            # 2017-01-03 digistump/OakCore
  - REPO=digistump/OakCore
  - REPO=boneskull/octohatrack        # 2016-07-26 LABHR/octohatrack
  - REPO=LABHR/octohatrack
  - REPO=boneskull/ol3                # 2016-01-28 openlayers/openlayers
  - REPO=openlayers/openlayers
  - REPO=boneskull/platform-espressif32  # 2018-02-09 platformio/platform-espressif32
  - REPO=platformio/platform-espressif32
  - REPO=boneskull/platform-espressif8266  # 2017-08-01 platformio/platform-espressif8266
  - REPO=platformio/platform-espressif8266
  - REPO=boneskull/platform-oak       # 2017-01-03
  - REPO=boneskull/platformio         # 2016-06-16 platformio/platformio-core
  - REPO=platformio/platformio-core
  - REPO=boneskull/Predictive-Market-Stress-Testing  # 2018-10-18 IBM/Predictive-Market-Stress-Testing
  - REPO=IBM/Predictive-Market-Stress-Testing
  - REPO=boneskull/RF24               # 2015-02-04 nRF24/RF24
  - REPO=nRF24/RF24
  - REPO=boneskull/serverless-home-automation  # 2017-07-03 IBM/serverless-home-automation
  - REPO=IBM/serverless-home-automation
  - REPO=boneskull/Sick-Beard         # 2017-02-21 midgetspy/Sick-Beard
  - REPO=midgetspy/Sick-Beard
  - REPO=boneskull/snowboy            # 2017-07-28 Kitt-AI/snowboy
  - REPO=Kitt-AI/snowboy
  - REPO=boneskull/tvfriend           # 2013-02-21 claywsmith/tvfriend
  - REPO=claywsmith/tvfriend
  - REPO=boneskull/VerifySketchConfig  # 2015-09-28 wayneandlayne/VerifySketchConfig
  - REPO=wayneandlayne/VerifySketchConfig
  - REPO=coreyfarrell/asterisk        # 2018-07-25 asterisk/asterisk
  - REPO=asterisk/asterisk
  - REPO=coreyfarrell/testsuite       # 2018-07-25 asterisk/testsuite
  - REPO=asterisk/testsuite

install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
