group: travis_latest
dist: xenial  # required for Python >= 3.7 (travis-ci/travis-ci#9069)
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=Azure/batch-extension-templates  # 2019-06-10
  - REPO=Azure/batch-insights         # 2019-04-17
  - REPO=Azure/batch-jenkins          # 2016-08-08
  - REPO=Azure/Batch-Scoring-Deep-Learning-Models-With-AKS  # 2019-02-07
  - REPO=Azure/Batch-Scoring-Deep-Learning-Models-With-AML  # 2019-05-09
  - REPO=Azure/batch-scoring-for-dl-models  # 2019-02-06
  - REPO=Azure/batch-shipyard         # 2019-06-17
  - REPO=Azure/BatchAI                # 2019-02-15
  - REPO=Azure/BatchAIAnomalyDetection  # 2019-01-28
  - REPO=Azure/batchai_retinanet_horovod_coco  # 2018-08-10
  - REPO=Azure/BatchExplorer          # 2019-06-17
  - REPO=Azure/BatchExplorer-data     # 2019-06-16
  - REPO=Azure/BatchLabs-data         # archived
  - REPO=Azure/BatchSparkScoringPredictiveMaintenance  # 2019-05-24
  - REPO=Azure/blobxfer               # 2019-05-30
  - REPO=Azure/build2018-container-demo  # 2018-06-12
  - REPO=Azure/China-AI-Solutions     # 2017-11-24
  - REPO=Azure/China-Data-Solutions   # 2019-01-21
  - REPO=Azure/CIQS-Azure-Cli-Extension  # 2018-08-02
  - REPO=Azure/connectthedots         # 2018-06-08
  - REPO=Azure/cookiecutter-azure-iot-edge-module  # 2019-06-17
  - REPO=Azure/cortana-intelligence-customer360  # 2018-08-10
  - REPO=Azure/cortana-intelligence-inventory-optimization  # 2018-10-21
  - REPO=Azure/cortana-intelligence-population-health-management  # 2018-12-01
  - REPO=Azure/cortana-intelligence-price-optimization  # 2017-09-05
  - REPO=Azure/cortana-intelligence-product-detection-from-images  # 2018-04-30
  - REPO=Azure/CustomerReviewDataAnalyticsTutorial  # 2017-07-05
  - REPO=Azure/cyclecloud-conda       # 2019-06-12
  - REPO=Azure/cyclecloud-gluster     # 2019-03-29
  - REPO=Azure/cyclecloud-gridengine  # 2019-01-31
  - REPO=Azure/cyclecloud-hpcpack     # 2019-04-17
  - REPO=Azure/cyclecloud-htcondor    # 2019-01-24
  - REPO=Azure/cyclecloud-kafka       # 2018-08-17
  - REPO=Azure/cyclecloud-lsf         # 2019-05-24
  - REPO=Azure/cyclecloud-pbspro      # 2019-06-11
  - REPO=Azure/cyclecloud-redis       # 2018-08-17
  - REPO=Azure/cyclecloud-slurm       # 2019-05-28
  - REPO=Azure/cyclecloud-symphony    # 2019-04-06
  - REPO=Azure/cyclecloud-zookeeper   # 2018-08-16
  - REPO=Azure/data-ai-iot            # 2019-03-25
  - REPO=Azure/databox-adls-loader    # 2019-06-17
  - REPO=Azure/DataScienceVM          # 2019-06-10
  - REPO=Azure/dcos-engine            # 2018-11-30
  - REPO=Azure/DeepLearningForTimeSeriesForecasting  # 2019-06-13
  - REPO=Azure/DeepLearningModelDeployment  # 2018-06-26
  - REPO=Azure/DevOps-For-AI-Apps     # 2019-02-07
  - REPO=Azure/DistributedDeepLearning  # 2018-12-18
  - REPO=Azure/doAzureParallel        # 2019-06-15
  - REPO=Azure/draft                  # 2019-05-14
  - REPO=Azure/Embarrassingly-Parallel-Image-Classification  # 2017-09-06
  - REPO=Azure/fast_retraining        # 2017-09-05
  - REPO=Azure/fluentd-plugin-mdsd    # 2018-11-08
  - REPO=Azure/Hangman                # 2017-11-02
  - REPO=Azure/hbase-utils            # 2019-04-05
  - REPO=Azure/hpc-analytics          # 2019-03-19
  - REPO=Azure/hpcpack-acm            # 2019-05-29
  - REPO=Azure/hpcpack-acm-api-python  # 2019-04-16
  - REPO=Azure/hpcpack-acm-cli        # 2019-04-16
  - REPO=Azure/hpcpack-mesos          # 2018-10-06
  - REPO=Azure/ImageSimilarityUsingCntk  # 2018-02-07
  - REPO=Azure/iot-central-firmware   # 2019-05-12
  - REPO=Azure/iot-central-mobile     # 2019-06-04
  - REPO=Azure/iot-sdks-e2e-fx        # 2019-06-17
  - REPO=Azure/iotedgedev             # 2019-06-10
  - REPO=Azure/iotedgehubdev          # 2019-06-14
  - REPO=Azure/ipython-cosmos-extension  # 2019-06-17
  - REPO=Azure/kubeflow-labs          # 2019-05-10
  - REPO=Azure/kubernetes             # 2019-06-17 kubernetes/kubernetes
  - REPO=kubernetes/kubernetes
  - REPO=Azure/kubernetes-hackfest    # 2019-06-11
  - REPO=Azure/LearnAI-Bootcamp       # 2019-05-29
  - REPO=Azure/LearnAI-CustomComputerVisionwithAML  # 2018-05-09
  - REPO=Azure/LearnAI_Azure_ML       # 2019-06-06
  - REPO=Azure/learnAnalytics-DeepLearning-Azure  # 2018-03-26
  - REPO=Azure/LearnAnalytics-mr4ds   # 2018-10-26
  - REPO=Azure/LearnAnalytics-SparkML  # 2017-08-30
  
install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F72,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
