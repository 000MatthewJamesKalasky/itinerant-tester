group: travis_latest
dist: xenial  # required for Python >= 3.7 (travis-ci/travis-ci#9069)
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=IBM/NetDash                  # 2019-03-01
  - REPO=IBM/nlc-icd10-classifier     # 2019-04-20
  - REPO=IBM/node-celery-ts           # 2019-05-09
  - REPO=IBM/node-ibmapm-restclient   # 2019-05-08
  - REPO=IBM/nodejs-idb-connector     # 2019-06-05
  - REPO=IBM/ny-power                 # 2019-04-18
  - REPO=IBM/object-detection-anki-overdrive-cars  # 2019-04-22
  - REPO=IBM/ocean-tensor-package     # 2019-03-12
  - REPO=IBM/opencv-power             # 2019-01-16
  - REPO=IBM/osslm-ansible-resource-manager  # 2019-05-21
  - REPO=IBM/osslm-docker-adaptor     # 2018-10-28
  - REPO=IBM/osslm-OpenSourceMANO-adaptor  # 2019-04-18
  - REPO=IBM/osslm-ucd-adaptor        # 2017-10-10
  - REPO=IBM/page-lab                 # 2019-04-18
  - REPO=IBM/photorealistic-blocksworld  # 2019-04-26
  - REPO=IBM/plex                     # 2019-06-04
  - REPO=IBM/PodcastDownloader        # 2019-04-22
  - REPO=IBM/portlibfori              # 2019-03-16
  - REPO=IBM/powerai                  # 2019-06-03
  - REPO=IBM/powerai-transfer-learning  # 2019-04-20
  - REPO=IBM/powervc-pluggable-storage  # 2018-11-14
  - REPO=IBM/predictive-model-on-watson-ml  # 2019-06-01 djccarew/watson-dojo-pm-tester
  - REPO=djccarew/watson-dojo-pm-tester
  - REPO=IBM/probabilistic-federated-neural-matching  # 2019-05-29
  - REPO=IBM/pyflowgraph              # 2019-02-13
  - REPO=IBM/pypeline                 # 2019-04-18
  - REPO=IBM/python-itoolkit          # 2019-05-30
  - REPO=IBM/python-sdk-core          # 2019-06-04
  - REPO=IBM/pytorch-cifar10-in-ibm-cloud  # 2019-04-18
  - REPO=IBM/pytorch-seq2seq          # 2018-12-08
  - REPO=IBM/pytorchpipe              # 2019-06-06
  - REPO=IBM/pyxcli                   # 2019-05-13
  - REPO=IBM/qpylib                   # 2019-05-10
  - REPO=IBM/quickcd                  # 2018-09-17
  - REPO=IBM/recommender-with-watson-visual-recognition  # 2019-05-13
  - REPO=IBM/rl-testbed-for-energyplus  # 2019-04-18
  - REPO=IBM/rotisserie               # 2019-04-18
  - REPO=IBM/secure-bitcoin-wallet    # 2018-10-16
  - REPO=IBM/secure-perimeter         # 2018-11-04
  - REPO=IBM/Semantic-Search-for-Sustainable-Development  # 2019-04-26
  - REPO=IBM/semanticflowgraph        # 2019-04-14
  - REPO=IBM/serverless-language-translation  # 2019-04-19
  - REPO=IBM/sms-spam-filter-using-hortonworks  # 2019-04-22
  - REPO=IBM/solution-test-samples    # 2019-02-11
  - REPO=IBM/SparkMultiuserBenchmark  # 2017-06-08
  - REPO=IBM/spring-boot-microservices-on-kubernetes  # 2019-05-03
  - REPO=IBM/SQL-to-Text              # 2018-11-19
  - REPO=IBM/stix-shifter             # 2019-06-03
  - REPO=IBM/stomp                    # 2019-05-22
  - REPO=IBM/SUSEInstallWithIBMCloud  # 2019-02-23
  - REPO=IBM/tensorflow-hangul-recognition  # 2019-04-26
  - REPO=IBM/tensorflow-kubernetes-art-classification  # 2019-04-20
  - REPO=IBM/tensorflow-large-model-support  # 2019-06-04
  - REPO=IBM/Text-to-LogicForm        # 2018-11-19
  - REPO=IBM/Train-Custom-Speech-Model  # 2019-04-26
  - REPO=IBM/training                 # 2019-03-02 cloud-annotations/training
  - REPO=cloud-annotations/training
  - REPO=IBM/turi-create-movie-recommender  # 2019-04-20
  - REPO=IBM/visual-recognition-for-cozmo-with-tensorflow  # 2019-04-19
  - REPO=IBM/watson-assistant-workbench  # 2019-06-06
  - REPO=IBM/watson-box-skills-with-nlu  # 2019-05-22 with-watson/watson-box-skills-lab-docs
  - REPO=with-watson/watson-box-skills-lab-docs
  - REPO=IBM/watson-discovery-analyze-data-breaches  # 2019-04-20
  - REPO=IBM/watson-online-store      # 2019-04-20
  - REPO=IBM/watson-voice-bot         # 2019-05-21
  - REPO=IBM/watson-waste-sorter      # 2019-05-01
  - REPO=IBM/wc-devops-utilities      # 2019-04-18
  - REPO=IBM/WordMoversEmbeddings     # 2018-12-05
  - REPO=IBM/worklog                  # 2019-04-18
  - REPO=IBM/xmlservice               # 2019-04-30
  - REPO=IBM/yaps                     # 2019-01-11
  - REPO=IBM/ZOO-Attack               # 2018-07-10
  - REPO=IBM/ZOSVRG-BlackBox-Adv      # 2018-10-30

install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F72,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
