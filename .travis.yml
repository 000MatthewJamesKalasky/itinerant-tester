group: travis_latest
dist: bionic
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=tapaswenipathak/addons-server  # 2019-08-03 mozilla/addons-server
  - REPO=mozilla/addons-server
  - REPO=tapaswenipathak/airmozilla   # 2014-10-19 mozilla/airmozilla
  - REPO=mozilla/airmozilla
  - REPO=tapaswenipathak/API-list     # 2019-05-31
  - REPO=tapaswenipathak/aws-batch-genomics  # 2019-03-10 aws-samples/aws-batch-genomics
  - REPO=aws-samples/aws-batch-genomics
  - REPO=tapaswenipathak/aws-parallelcluster  # 2019-07-24 aws/aws-parallelcluster
  - REPO=aws/aws-parallelcluster
  - REPO=tapaswenipathak/bigquery-examples  # 2017-06-09 googlegenomics/bigquery-examples
  - REPO=googlegenomics/bigquery-examples
  - REPO=tapaswenipathak/BluePyMM     # 2019-04-05 BlueBrain/BluePyMM
  - REPO=BlueBrain/BluePyMM
  - REPO=tapaswenipathak/BluePyOpt    # 2019-07-09 BlueBrain/BluePyOpt
  - REPO=BlueBrain/BluePyOpt
  - REPO=tapaswenipathak/Brayns       # 2019-07-10 BlueBrain/Brayns
  - REPO=BlueBrain/Brayns
  - REPO=tapaswenipathak/brian2       # 2019-07-02 brian-team/brian2
  - REPO=brian-team/brian2
  - REPO=tapaswenipathak/cassandra    # 2019-07-07 apache/cassandra
  - REPO=apache/cassandra
  - REPO=tapaswenipathak/CFP          # 2019-07-01
  - REPO=tapaswenipathak/chromium-dashboard  # 2019-08-04 GoogleChrome/chromium-dashboard
  - REPO=GoogleChrome/chromium-dashboard
  - REPO=tapaswenipathak/Competitive-Programming  # 2019-04-06
  - REPO=tapaswenipathak/CoreNeuron   # 2019-07-24 BlueBrain/CoreNeuron
  - REPO=BlueBrain/CoreNeuron
  - REPO=tapaswenipathak/datahub      # 2019-07-02 cBioPortal/datahub
  - REPO=cBioPortal/datahub
  - REPO=tapaswenipathak/DidYouTweetOpenSource  # 2019-04-25
  - REPO=tapaswenipathak/distcc       # 2019-07-14 distcc/distcc
  - REPO=distcc/distcc
  - REPO=tapaswenipathak/django       # 2019-04-30 django/django
  - REPO=django/django
  - REPO=tapaswenipathak/django-csvimport  # 2014-08-26 edcrewe/django-csvimport
  - REPO=edcrewe/django-csvimport
  - REPO=tapaswenipathak/docs         # 2019-07-24 mattermost/docs
  - REPO=mattermost/docs
  - REPO=tapaswenipathak/dvc          # 2019-05-05 iterative/dvc
  - REPO=iterative/dvc
  - REPO=tapaswenipathak/EconML       # 2019-07-25 microsoft/EconML
  - REPO=microsoft/EconML
  - REPO=tapaswenipathak/edx-documentation  # 2019-08-13 edx/edx-documentation
  - REPO=edx/edx-documentation
  - REPO=tapaswenipathak/flask-autocomplete  # 2019-04-06
  - REPO=tapaswenipathak/genn         # 2019-07-27 genn-team/genn
  - REPO=genn-team/genn
  - REPO=tapaswenipathak/genome       # 2019-05-30 genome/genome
  - REPO=genome/genome
  - REPO=tapaswenipathak/GitGIFs      # 2019-06-27
  - REPO=tapaswenipathak/Help-The-Needy  # 2015-04-07
  - REPO=tapaswenipathak/hexchat      # 2019-06-01 hexchat/hexchat
  - REPO=hexchat/hexchat
  - REPO=tapaswenipathak/Horoscope-API  # 2019-07-17
  - REPO=tapaswenipathak/HowTo-Comment  # 2016-09-03
  - REPO=tapaswenipathak/hpx          # 2019-08-01 STEllAR-GROUP/hpx
  - REPO=STEllAR-GROUP/hpx
  - REPO=tapaswenipathak/hydrus       # 2019-07-15 HTTP-APIs/hydrus
  - REPO=HTTP-APIs/hydrus
  - REPO=tapaswenipathak/i18n         # 2019-08-03 theoldreader/i18n
  - REPO=theoldreader/i18n
  - REPO=tapaswenipathak/inpycon-blog  # 2015-03-17 pythonindia/inpycon-blog
  - REPO=pythonindia/inpycon-blog
  - REPO=tapaswenipathak/jupyter      # 2019-08-15 jupyter/jupyter
  - REPO=jupyter/jupyter
  - REPO=tapaswenipathak/manticore    # 2019-07-31 manticoreos/manticore
  - REPO=manticoreos/manticore
  - REPO=tapaswenipathak/mpi          # 2019-07-15 boostorg/mpi
  - REPO=boostorg/mpi
  - REPO=tapaswenipathak/mriqc        # 2019-04-05 poldracklab/mriqc
  - REPO=poldracklab/mriqc
  - REPO=tapaswenipathak/mypy         # 2019-05-31 python/mypy
  - REPO=python/mypy
  - REPO=tapaswenipathak/nengo        # 2019-06-12 nengo/nengo
  - REPO=nengo/nengo
  - REPO=tapaswenipathak/NeuroMorphoVis  # 2019-04-17 BlueBrain/NeuroMorphoVis
  - REPO=BlueBrain/NeuroMorphoVis
  - REPO=tapaswenipathak/nmodl        # 2019-07-10 BlueBrain/nmodl
  - REPO=BlueBrain/nmodl
  - REPO=tapaswenipathak/notes        # 2019-07-26 mozilla/notes
  - REPO=mozilla/notes
  - REPO=tapaswenipathak/nrn          # 2019-05-31 neuronsimulator/nrn
  - REPO=neuronsimulator/nrn
  - REPO=tapaswenipathak/odl          # 2019-08-13 odlgroup/odl
  - REPO=odlgroup/odl
  - REPO=tapaswenipathak/ohpc         # 2019-05-26 openhpc/ohpc
  - REPO=openhpc/ohpc
  - REPO=tapaswenipathak/ompi         # 2019-07-16 open-mpi/ompi
  - REPO=open-mpi/ompi
  - REPO=tapaswenipathak/Open-Source-Programs  # 2019-07-20
  - REPO=tapaswenipathak/openelisglobal-core  # 2019-05-17 openelisglobal/openelisglobal-core
  - REPO=openelisglobal/openelisglobal-core
  - REPO=tapaswenipathak/openfoodfacts-server  # 2019-07-07 openfoodfacts/openfoodfacts-server
  - REPO=openfoodfacts/openfoodfacts-server
  - REPO=tapaswenipathak/openlibrary  # 2019-08-16 internetarchive/openlibrary
  - REPO=internetarchive/openlibrary

install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
