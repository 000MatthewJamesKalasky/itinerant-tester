group: travis_latest
dist: bionic
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=0voice/interview_internal_reference
  - REPO=Azure/azure-sdk-for-python
  - REPO=ColdGrub1384/Pyto
  - REPO=CompVis/metric-learning-divide-and-conquer
  - REPO=Ganapati/RsaCtfTool
  - REPO=Gnucash/gnucash
  - REPO=GoogleCloudPlatform/python-docs-samples
  - REPO=Greenwolf/social_mapper
  - REPO=HIPS/autograd
  - REPO=Homebrew/homebrew-cask
  - REPO=MycroftAI/mycroft-core
  - REPO=Netflix/msl
  - REPO=PaddlePaddle/ERNIE
  - REPO=PyCQA/pycodestyle
  - REPO=Pythonista-Tools/Pythonista-Tools
  - REPO=RobotWebTools/rosbridge_suite
  - REPO=Roibal/Cryptocurrency-Trading-Bots-Python-Beginner-Advance
  - REPO=Tencent/MedicalNet
  - REPO=ZhuiyiTechnology/nl2sql_baseline
  - REPO=ahmetozlu/tensorflow_object_counting_api
  - REPO=al0ne/Vxscan
  - REPO=animate1978/MB-Lab
  - REPO=apache/beam
  - REPO=apache/hadoop
  - REPO=chhantyal/py3readiness
  - REPO=chinese-poetry/chinese-poetry
  - REPO=cpplint/cpplint
  - REPO=dagster-io/dagster
  - REPO=datacommonsorg/api-python
  - REPO=datawire/ambassador
  - REPO=dddomodossola/remi
  - REPO=didi/delta
  - REPO=easybuilders/easybuild
  - REPO=edx/edx-search
  - REPO=elastic/helm-charts
  - REPO=emscripten-core/emscripten
  - REPO=facebook/bistro
  - REPO=facebook/ds2
  - REPO=facebookresearch/FixRes
  - REPO=facebookresearch/inversecooking
  - REPO=fossasia/open-event-server
  - REPO=frappe/erpnext
  - REPO=gabrielfalcao/sure
  - REPO=garethdmm/gryphon
  - REPO=geekcomputers/Python
  - REPO=geops/redis-websocket-api
  - REPO=getredash/redash
  - REPO=ggtracker/sc2reader
  - REPO=git/git
  - REPO=gitgitgadget/git
  - REPO=github/octodns
  - REPO=golangci/golangci-lint
  - REPO=google-research/google-research
  - REPO=google/certificate-transparency
  - REPO=google/ffn
  - REPO=google/googletest
  - REPO=google/jax
  - REPO=google/yapf
  - REPO=googleapis/api-linter
  - REPO=googleapis/google-api-python-client
  - REPO=googleapis/google-cloud-cpp
  - REPO=googleapis/google-cloud-dotnet
  - REPO=googleapis/google-cloud-java
  - REPO=googleapis/sample-tester
  - REPO=guohongze/adminset
  - REPO=hash3liZer/WiFiBroot
  - REPO=heroku/heroku-buildpack-python
  - REPO=hexway/apple_bleee
  - REPO=hhyo/Archery
  - REPO=ibm-watson-iot/functions
  - REPO=idealo/image-super-resolution
  - REPO=internetarchive/infogami
  - REPO=internetarchive/openlibrary
  - REPO=iovisor/bcc
  - REPO=jbeder/yaml-cpp
  - REPO=johanjanssen/ChocolateyPackages
  - REPO=jythontools/jython
  - REPO=kaushaltrivedi/fast-bert
  - REPO=keon/algorithms
  - REPO=keras-team/keras
  - REPO=krisgesling/contributors
  - REPO=kubeflow/pipelines
  - REPO=kubernetes-client/python
  - REPO=kubernetes/autoscaler
  - REPO=kubernetes/frakti
  - REPO=kubernetes/k8s.io
  - REPO=kubernetes/kops
  - REPO=kubernetes/kubernetes
  - REPO=kubernetes/minikube
  - REPO=kubernetes/perf-tests
  - REPO=kubernetes/repo-infra
  - REPO=libkeepass/libkeepass
  - REPO=lightaime/deep_gcns
  - REPO=lihanghang/Knowledge-Graph
  - REPO=luong-komorebi/Awesome-Linux-Software
  - REPO=lxml/lxml
  - REPO=mahbubcseju/DroneFlight
  - REPO=mandatoryprogrammer/TrustTrees
  - REPO=meolu/walle-web
  - REPO=momorprods/TreasureHunt
  - REPO=mravanelli/pytorch-kaldi
  - REPO=msgi/nlp-journey
  - REPO=openai/mujoco-py
  - REPO=opencv/open_model_zoo
  - REPO=priya-dwivedi/Deep-Learning
  - REPO=pvcraven/arcade
  - REPO=pvcraven/arcade_book
  - REPO=pybluez/pybluez
  - REPO=pyglet/pyglet
  - REPO=pytorch/fairseq
  - REPO=pywinauto/pywinauto
  - REPO=quark0/darts
  - REPO=rkern/line_profiler
  - REPO=ros-infrastructure/rep
  - REPO=scj643/monokuma
  - REPO=sdementen/piecash
  - REPO=sfyc23/EverydayWechat
  - REPO=sherlock-project/sherlock
  - REPO=spesmilo/electrum
  - REPO=subho406/OmniNet
  - REPO=sybrenstuvel/python-rsa
  - REPO=tensorflow/text
  - REPO=thunil/TecoGAN
  - REPO=thunlp/OpenKE
  - REPO=travis-ci/docs-travis-ci-com
  - REPO=travis-ci/dpl
  - REPO=travis-ci/travis-build
  - REPO=ubershmekel/python3wos
  - REPO=ugorji/go
  - REPO=vincent-thevenin/Realistic-Neural-Talking-Head-Models
  - REPO=vulmon/Vulmap
  - REPO=xinshuoweng/AB3DMOT
  - REPO=zephyrproject-rtos/zephyr

install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
