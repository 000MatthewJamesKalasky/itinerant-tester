group: travis_latest
dist: xenial  # required for Python >= 3.7 (travis-ci/travis-ci#9069)
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=Azure/acs-demos              # archived
  - REPO=Azure/ACS-Deployment-Tutorial  # 2017-05-18
  - REPO=Azure/acs-engine             # 2019-03-22
  - REPO=Azure/active-learning-workshop  # 2019-03-15
  - REPO=Azure/adx-automation-client  # 2018-10-24
  - REPO=Azure/adx-automation-monitor  # 2018-09-04
  - REPO=Azure/AI-PredictiveMaintenance  # 2018-09-04
  - REPO=Azure/ai-toolkit-iot-edge    # 2019-06-05
  - REPO=Azure/AIDevOps-TDSP-Template  # 2019-03-02
  - REPO=Azure/aks-engine             # 2019-06-17
  - REPO=Azure/AML-AirField           # 2018-11-01
  - REPO=Azure/aml-real-time-ai       # 2019-05-08
  - REPO=Azure/AMLPipelines           # 2019-02-11
  - REPO=Azure/AMLSamples             # 2019-06-02
  - REPO=Azure/app-service-quickstart-docker-images  # 2019-05-29
  - REPO=Azure/autorest.python        # 2019-06-17
  - REPO=Azure/Avere                  # 2019-06-14
  - REPO=Azure/AvereSDK               # 2019-05-30
  - REPO=Azure/azfilebackup           # 2019-05-22
  - REPO=Azure/aztk                   # 2019-05-21
  - REPO=Azure/Azure-AppServices-Diagnostics  # 2019-06-17
  - REPO=Azure/azure-batch-apps-blender  # 2017-06-17
  - REPO=Azure/azure-batch-apps-python  # 2015-07-15
  - REPO=Azure/azure-batch-cli-extensions  # 2019-04-19
  - REPO=Azure/azure-batch-maya       # 2019-06-10
  - REPO=Azure/azure-batch-rendering  # 2019-06-10
  - REPO=Azure/azure-batch-sdk-for-java  # 2019-01-08
  - REPO=Azure/azure-cli              # 2019-06-17
  - REPO=Azure/azure-cli-dev-tools    # 2019-06-10
  - REPO=Azure/azure-cli-extensions   # 2019-06-17
  - REPO=Azure/azure-cli-shell        # 2017-04-28
  - REPO=Azure/azure-cosmos-python    # 2019-05-08
  - REPO=Azure/azure-cosmos-table-python  # 2019-01-19
  - REPO=Azure/azure-data-lake-store-python  # 2019-05-10
  - REPO=Azure/Azure-Data-Service-Notebook  # 2018-07-06
  - REPO=Azure/azure-devops-cli-extension  # 2019-06-14
  - REPO=Azure/azure-diskinspect-service  # 2019-06-17
  - REPO=Azure/azure-event-hubs-for-kafka  # 2019-04-19
  - REPO=Azure/azure-event-hubs-python  # 2019-05-17
  - REPO=Azure/azure-functions-core-tools  # 2019-06-17
  - REPO=Azure/azure-functions-devops-build  # 2019-06-04
  - REPO=Azure/azure-functions-docker-python-sample  # 2019-05-29
  - REPO=Azure/azure-functions-kafka-extension  # 2019-06-12
  - REPO=Azure/azure-functions-python-library  # 2019-06-17
  - REPO=Azure/azure-functions-python-worker  # 2019-06-17
  - REPO=Azure/azure-functions-templates  # 2019-06-14
  - REPO=Azure/azure-hanaonazure-cli-extension  # 2019-06-17
  - REPO=Azure/azure-hpc              # 2018-10-04
  - REPO=Azure/azure-iiot-services-api  # 2019-06-17
  - REPO=Azure/azure-iot-cli-extension  # 2019-06-17
  - REPO=Azure/azure-iot-experimental  # 2018-08-15
  - REPO=Azure/azure-iot-sdk-c        # 2019-06-15
  - REPO=Azure/azure-iot-sdk-java     # 2019-06-17
  - REPO=Azure/azure-iot-sdk-python   # 2019-06-17
  - REPO=Azure/azure-iot-sdk-python-preview  # 2019-06-17
  - REPO=Azure/azure-key-vault-secret-as-a-service  # 2017-07-31
  - REPO=Azure/azure-keyvault-cli-extension  # 2018-08-10
  - REPO=Azure/azure-keyvault-java    # archived
  - REPO=Azure/azure-kusto-demos      # 2019-04-17
  - REPO=Azure/azure-kusto-ingestion-tools  # 2019-06-16
  - REPO=Azure/azure-kusto-python     # 2019-06-13
  - REPO=Azure/azure-libraries-for-java  # 2019-06-17
  - REPO=Azure/azure-libraries-for-net  # 2019-06-13
  - REPO=Azure/azure-linux-automation  # 2018-10-11
  - REPO=Azure/azure-linux-extensions  # 2019-06-17
  - REPO=Azure/Azure-MachineLearning-ClientLibrary-Python  # 2018-09-11
  - REPO=Azure/Azure-MachineLearning-DataScience  # 2018-08-24
  - REPO=Azure/azure-multiapi-storage-python  # 2019-03-19
  - REPO=Azure/azure-mysql            # 2018-10-15
  - REPO=Azure/azure-notificationhubs-samples  # 2019-06-06
  - REPO=Azure/azure-powershell       # 2019-06-17
  - REPO=Azure/azure-python-devtools  # 2019-06-07
  - REPO=Azure/azure-python-siteextensions  # 2018-03-07
  - REPO=Azure/azure-quickstart-templates  # 2019-06-17
  - REPO=Azure/azure-sdk-for-java     # 2019-06-17
  - REPO=Azure/azure-sdk-for-python   # 2019-06-17
  - REPO=Azure/azure-sdk-tools        # 2019-06-17
  - REPO=Azure/Azure-Sentinel         # 2019-06-17
  - REPO=Azure/azure-signalr-bench    # 2019-06-17
  - REPO=Azure/azure-sql-database-samples  # 2016-10-26
  - REPO=Azure/azure-storage-azcopy   # 2019-06-17
  - REPO=Azure/azure-storage-fuse     # 2019-04-29
  - REPO=Azure/azure-storage-python   # 2019-06-17
  - REPO=Azure/Azure-TDSP-Utilities   # 2018-11-08
  - REPO=Azure/azure-uamqp-python     # 2019-06-13
  - REPO=Azure/AzureChestXRay         # 2018-09-04
  - REPO=Azure/AzureML-Recommendation-RRS  # 2018-06-25
  - REPO=Azure/azure_modules          # 2019-06-12
  - REPO=Azure/azure_preview_modules  # 2019-06-14
  
install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F72,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
