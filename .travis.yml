group: travis_latest
dist: xenial  # required for Python >= 3.7 (travis-ci/travis-ci#9069)
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  - 3.7
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=mwtoews/affine               # 2019-05-10 sgillies/affine
  - REPO=sgillies/affine
  - REPO=mwtoews/asdf-standard        # 2018-06-15 spacetelescope/asdf-standard
  - REPO=spacetelescope/asdf-standard
  - REPO=mwtoews/bmi-csdms            # 2019-03-21 csdms/bmi
  - REPO=csdms/bmi
  - REPO=mwtoews/conda-docs           # 2019-01-09 conda/conda-docs
  - REPO=conda/conda-docs
  - REPO=conda/conda-recipes
  - REPO=cython/cython
  - REPO=mwtoews/Fiona                # 2018-05-26 Toblerity/Fiona
  - REPO=Toblerity/Fiona
  - REPO=mwtoews/flopy                # 2019-05-28 modflowpy/flopy
  - REPO=modflowpy/flopy
  - REPO=mwtoews/gdal                 # 2019-05-03 OSGeo/gdal
  - REPO=OSGeo/gdal
  - REPO=mwtoews/geopandas            # 2019-05-29 geopandas/geopandas
  - REPO=geopandas/geopandas
  - REPO=geopy/geopy
  - REPO=mwtoews/geos                 # 2019-04-03 libgeos/geos
  - REPO=libgeos/geos
  - REPO=mwtoews/geoserver            # 2018-09-28 geoserver/geoserver
  - REPO=geoserver/geoserver
  - REPO=mwtoews/MODFLOW-USG          # 2019-03-07
  - REPO=mwtoews/modflow6             # 2019-01-30 MODFLOW-USGS/modflow6
  - REPO=MODFLOW-USGS/modflow6
  - REPO=mwtoews/mt3d-usgs            # 2019-04-15 MODFLOW-USGS/mt3d-usgs
  - REPO=MODFLOW-USGS/mt3d-usgs
  - REPO=mwtoews/numexpr              # 2018-09-28 pydata/numexpr
  - REPO=pydata/numexpr
  - REPO=mwtoews/numpy                # 2018-09-25 numpy/numpy
  - REPO=numpy/numpy
  - REPO=mwtoews/pandas               # 2018-07-30 pandas-dev/pandas
  - REPO=pandas-dev/pandas
  - REPO=mwtoews/pestpp-jtwhite79     # 2019-01-08 jtwhite79/pestpp
  - REPO=jtwhite79/pestpp
  - REPO=mwtoews/pestpp-usgs          # 2019-05-17 usgs/pestpp
  - REPO=usgs/pestpp
  - REPO=mwtoews/proj-datumgrid       # 2018-10-09 OSGeo/proj-datumgrid
  - REPO=OSGeo/proj-datumgrid
  - REPO=pcjericks/py-gdalogr-cookbook
  - REPO=mwtoews/pyemu                # 2018-08-11 jtwhite79/pyemu
  - REPO=jtwhite79/pyemu
  - REPO=mwtoews/pymake               # 2019-03-14 modflowpy/pymake
  - REPO=modflowpy/pymake
  - REPO=mwtoews/pyproj               # 2018-07-18 pyproj4/pyproj
  - REPO=pyproj4/pyproj
  - REPO=mwtoews/pyshp                # 2018-05-09 GeospatialPython/pyshp
  - REPO=GeospatialPython/pyshp
  - REPO=mwtoews/QGIS                 # 2018-03-24 qgis/QGIS
  - REPO=qgis/QGIS
  - REPO=camptocamp/QGIS-SpreadSheetLayers
  - REPO=ccrook/QGIS-VectorFieldRenderer-Plugin
  - REPO=mwtoews/rasterio             # 2018-07-24 mapbox/rasterio
  - REPO=mapbox/rasterio
  - REPO=Toblerity/rtree
  - REPO=mwtoews/scipy                # 2018-06-29 scipy/scipy
  - REPO=scipy/scipy
  - REPO=mwtoews/Shapely              # 2019-04-06 Toblerity/Shapely
  - REPO=Toblerity/Shapely
  - REPO=spyder-ide/spyder
  - REPO=mbakker7/timml
  - REPO=mbakker7/ttim

install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F72,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
