group: travis_latest
dist: bionic
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  #- 3.7
  - 3.8
matrix:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=tseaver/apitools             # 2015-03-31 google/apitools
  - REPO=google/apitools
  - REPO=tseaver/appendonly           # 2014-12-28
  - REPO=tseaver/aubio                # 2017-01-12 aubio/aubio
  - REPO=aubio/aubio
  - REPO=tseaver/BTrees_pypy_benchmarks  # 2014-04-14
  - REPO=tseaver/buildout             # 2013-06-13 buildout/buildout
  - REPO=buildout/buildout
  - REPO=tseaver/candide              # 2015-02-02
  - REPO=tseaver/cellularautomaton    # 2015-02-09 mvseaver/cellularautomaton
  - REPO=mvseaver/cellularautomaton
  - REPO=tseaver/chameleon            # 2016-12-05 malthe/chameleon
  - REPO=malthe/chameleon
  - REPO=tseaver/compoze              # 2015-12-11
  - REPO=tseaver/cornice              # 2012-09-06 Cornices/cornice
  - REPO=Cornices/cornice
  - REPO=tseaver/curveship            # 2011-03-26 ziz/curveship
  - REPO=ziz/curveship
  - REPO=tseaver/dbstringanalysis     # 2013-03-17 jimfulton/dbstringanalysis
  - REPO=jimfulton/dbstringanalysis
  - REPO=tseaver/deform               # 2016-06-29 collective/deform
  - REPO=collective/deform
  - REPO=tseaver/deform_bootstrap     # 2013-05-03 Kotti/deform_bootstrap
  - REPO=Kotti/deform_bootstrap
  - REPO=tseaver/fritter              # 2015-02-04
  - REPO=tseaver/gapic-generator      # 2019-09-26 googleapis/gapic-generator
  - REPO=googleapis/gapic-generator
  - REPO=tseaver/google-apputils-python  # 2014-11-14
  - REPO=tseaver/google-auth-library-python  # 2019-07-26 googleapis/google-auth-library-python
  - REPO=googleapis/google-auth-library-python
  - REPO=tseaver/google-cloud-python  # 2019-11-14 googleapis/google-cloud-python
  - REPO=googleapis/google-cloud-python
  - REPO=tseaver/google-cloud-python-happybase  # 2018-10-08 googleapis/google-cloud-python-happybase
  - REPO=googleapis/google-cloud-python-happybase
  - REPO=tseaver/google-resumable-media-python  # 2019-11-14 googleapis/google-resumable-media-python
  - REPO=googleapis/google-resumable-media-python
  - REPO=tseaver/happybase            # 2016-08-13 python-happybase/happybase
  - REPO=python-happybase/happybase
  - REPO=tseaver/markupsafe           # 2013-05-22 pallets/markupsafe
  - REPO=pallets/markupsafe
  - REPO=tseaver/meld3                # 2013-11-19 Supervisor/meld3
  - REPO=Supervisor/meld3
  - REPO=tseaver/mr.developer         # 2010-04-16 fschulze/mr.developer
  - REPO=fschulze/mr.developer
  - REPO=tseaver/multiplyrudely       # 2015-01-21 mvseaver/multiplyrudely
  - REPO=mvseaver/multiplyrudely
  - REPO=tseaver/MySQLdb1             # 2013-06-14 farcepest/MySQLdb1
  - REPO=farcepest/MySQLdb1
  - REPO=tseaver/nox                  # 2017-06-06 theacodes/nox
  - REPO=theacodes/nox
  - REPO=tseaver/pip                  # 2014-11-24 pypa/pip
  - REPO=pypa/pip
  - REPO=tseaver/planet.plone.org     # 2013-09-26 plone/planet.plone.org
  - REPO=plone/planet.plone.org
  - REPO=tseaver/plungyr              # 2013-01-12
  - REPO=tseaver/PredictionIO-Docs    # 2013-10-30 PredictionIO/PredictionIO-Docs
  - REPO=PredictionIO/PredictionIO-Docs
  - REPO=tseaver/Products.FSDump      # 2019-06-24
  - REPO=tseaver/Products.thrashcatcher  # 2017-10-22
  - REPO=tseaver/protobuf             # 2015-05-11 protocolbuffers/protobuf
  - REPO=protocolbuffers/protobuf
  - REPO=tseaver/protorpc             # 2015-02-27 google/protorpc
  - REPO=google/protorpc
  - REPO=tseaver/py-crc32c            # 2018-11-07 dhermes/py-crc32c
  - REPO=dhermes/py-crc32c
  - REPO=tseaver/pyramid              # 2016-12-07 miohtama/pyramid
  - REPO=miohtama/pyramid
  - REPO=tseaver/pyramident           # 2012-03-29
  - REPO=tseaver/pyramid_nacl_session  # 2017-01-06 lmctv/pyramid_nacl_session
  - REPO=lmctv/pyramid_nacl_session
  - REPO=tseaver/pyramid_tm           # 2017-01-27 miohtama/pyramid_tm
  - REPO=miohtama/pyramid_tm
  - REPO=tseaver/python-oauth2        # 2015-07-29 joestump/python-oauth2
  - REPO=joestump/python-oauth2
  - REPO=tseaver/python-openid        # 2012-03-29 openid/python-openid
  - REPO=openid/python-openid
  - REPO=tseaver/pytn2014             # 2014-02-22
  - REPO=tseaver/relstorage           # 2013-05-29 zodb/relstorage
  - REPO=zodb/relstorage
  - REPO=tseaver/repoze.catalog       # 2019-02-07 repoze/repoze.catalog
  - REPO=repoze/repoze.catalog
  - REPO=tseaver/repoze.postoffice    # 2013-10-10 repoze/repoze.postoffice
  - REPO=repoze/repoze.postoffice
  - REPO=tseaver/repoze.who-x509      # 2012-03-26 arturosevilla/repoze.who-x509
  - REPO=arturosevilla/repoze.who-x509
  - REPO=tseaver/rt-python-api        # 2012-11-27
  - REPO=tseaver/rutter               # 2018-03-05
  - REPO=tseaver/scarlett_yaml        # 2018-01-19
  - REPO=tseaver/sloth                # 2019-03-26 googleapis/sloth
  - REPO=googleapis/sloth
  - REPO=tseaver/substanced           # 2012-08-22 Pylons/substanced
  - REPO=Pylons/substanced
  - REPO=tseaver/supervisor           # 2015-09-01 scottkmaxwell/supervisor
  - REPO=scottkmaxwell/supervisor
  - REPO=tseaver/synthtool            # 2019-06-05 googleapis/synthtool
  - REPO=googleapis/synthtool
  - REPO=tseaver/thunderdome          # 2014-02-05 StartTheShift/thunderdome
  - REPO=StartTheShift/thunderdome
  - REPO=tseaver/travis_notify        # 2015-01-06
  - REPO=tseaver/velruse              # 2013-07-12 bbangert/velruse
  - REPO=bbangert/velruse
  - REPO=tseaver/webob                # 2019-02-20 ProzorroUKR/webob
  - REPO=ProzorroUKR/webob
  - REPO=tseaver/Zope-RFA             # 2015-06-26 RadioFreeAsia/Zope
  - REPO=RadioFreeAsia/Zope
install:
  #- pip install -r requirements.txt
  - pip install flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - time flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
