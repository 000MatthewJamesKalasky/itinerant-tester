group: travis_latest
os: linux
dist: focal
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  #- 3.7
  - 3.8
jobs:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=KevinHock/307-final-project  # 2016-03-08
  - REPO=KevinHock/aws_ir             # 2016-09-22 ThreatResponse/aws_ir
  - REPO=ThreatResponse/aws_ir
  - REPO=KevinHock/bap-tutorial       # 2019-03-29 BinaryAnalysisPlatform/bap-tutorial
  - REPO=BinaryAnalysisPlatform/bap-tutorial
  - REPO=KevinHock/checkov            # 2020-06-25 bridgecrewio/checkov
  - REPO=bridgecrewio/checkov
  - REPO=KevinHock/codeclimatepyt     # 2017-07-13
  - REPO=KevinHock/detect-secrets     # 2020-06-05 Yelp/detect-secrets
  - REPO=Yelp/detect-secrets
  - REPO=KevinHock/doorman            # 2016-09-21 mwielgoszewski/doorman
  - REPO=mwielgoszewski/doorman
  - REPO=KevinHock/flask-pastebin     # 2016-09-29 mitsuhiko/flask-pastebin
  - REPO=mitsuhiko/flask-pastebin
  - REPO=KevinHock/focuson            # 2017-04-20 uber/focuson
  - REPO=uber/focuson
  - REPO=KevinHock/margaritashotgun   # 2018-01-25 ThreatResponse/margaritashotgun
  - REPO=ThreatResponse/margaritashotgun
  - REPO=KevinHock/matasano-crypto-challenges  # 2016-03-08
  - REPO=KevinHock/pre-commit         # 2017-11-09 pre-commit/pre-commit
  - REPO=pre-commit/pre-commit
  - REPO=KevinHock/pre-commit.github.io  # 2020-04-01 pre-commit/pre-commit.com
  - REPO=pre-commit/pre-commit.com
  - REPO=KevinHock/psutil             # 2020-03-20 giampaolo/psutil
  - REPO=giampaolo/psutil
  - REPO=KevinHock/pyforce            # 2017-12-01 salesforce-python-client/pyforce
  - REPO=salesforce-python-client/pyforce
  - REPO=KevinHock/pyre-check         # 2020-02-25 facebook/pyre-check
  - REPO=facebook/pyre-check
  - REPO=KevinHock/pyt                # 2017-05-16 python-security/pyt
  - REPO=python-security/pyt
  - REPO=KevinHock/python-saml        # 2018-04-25 onelogin/python-saml
  - REPO=onelogin/python-saml
  - REPO=KevinHock/rtdpyt             # 2018-08-03
  - REPO=KevinHock/sample_alerting_lambda  # 2018-01-25
  - REPO=KevinHock/TrustTrees         # 2019-07-27 mandatoryprogrammer/TrustTrees
  - REPO=mandatoryprogrammer/TrustTrees
install:
  #- pip install -r requirements.txt
  - pip install codespell flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  - codespell . --ignore-words-list=ba,referer --skip=./.* --quiet-level=2 || true
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
