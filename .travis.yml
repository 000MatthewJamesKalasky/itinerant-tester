group: travis_latest
os: linux
dist: focal
language: python
cache: pip
python:
  #- 2.7
  #- 3.5
  #- 3.6
  #- 3.7
  - 3.8
jobs:
  allow_failures:
    - python: 2.7
    - python: nightly
    - python: pypy
    - python: pypy3
env:
  - REPO=marload/Abnormal_Event_Detection  # 2019-05-05 harshtikuu/Abnormal_Event_Detection
  - REPO=harshtikuu/Abnormal_Event_Detection
  - REPO=marload/AI-Wafer-Edge-Trouble-Inspection-System-DL-Code  # 2019-01-09
  - REPO=marload/AutoEncoders-TensorFlow2  # 2020-05-06
  - REPO=marload/beamcoder            # 2020-02-03 Streampunk/beamcoder
  - REPO=Streampunk/beamcoder
  - REPO=marload/claf                 # 2020-04-11 naver/claf
  - REPO=naver/claf
  - REPO=marload/ConvNets-TensorFlow2  # 2020-05-05
  - REPO=marload/cpython              # 2020-07-09 python/cpython
  - REPO=python/cpython
  - REPO=marload/DAFT                 # 2019-10-22 kakao/DAFT
  - REPO=kakao/DAFT
  - REPO=marload/dask                 # 2020-04-14 dask/dask
  - REPO=dask/dask
  - REPO=marload/DeepRL-TensorFlow2   # 2020-05-04
  - REPO=marload/DeepSpeed            # 2020-04-21 microsoft/DeepSpeed
  - REPO=microsoft/DeepSpeed
  - REPO=marload/detectron2           # 2019-12-13 facebookresearch/detectron2
  - REPO=facebookresearch/detectron2
  - REPO=marload/DistRL-TensorFlow2   # 2020-04-28
  - REPO=marload/django               # 2020-04-16 django/django
  - REPO=django/django
  - REPO=marload/dm-haiku             # 2020-03-02 deepmind/dm-haiku
  - REPO=deepmind/dm-haiku
  - REPO=marload/docs                 # 2019-08-12 tensorflow/docs
  - REPO=tensorflow/docs
  - REPO=marload/EdgeML               # 2020-04-20 microsoft/EdgeML
  - REPO=microsoft/EdgeML
  - REPO=marload/GANs-TensorFlow-2.0  # 2019-07-18
  - REPO=marload/GANs-TensorFlow2     # 2020-05-10
  - REPO=marload/gym                  # 2020-03-10 openai/gym
  - REPO=openai/gym
  - REPO=marload/haiku-scalable-example  # 2020-03-08 chris-chris/haiku-scalable-example
  - REPO=chris-chris/haiku-scalable-example
  - REPO=marload/horovod              # 2020-04-10 horovod/horovod
  - REPO=horovod/horovod
  - REPO=marload/hydra                # 2020-04-11 facebookresearch/hydra
  - REPO=facebookresearch/hydra
  - REPO=marload/hyperopt             # 2020-06-05 hyperopt/hyperopt
  - REPO=hyperopt/hyperopt
  - REPO=marload/ImprovedResNet-TensorFlow2  # 2020-04-24
  - REPO=marload/jax                  # 2020-02-27 google/jax
  - REPO=google/jax
  - REPO=marload/keras                # 2020-07-04 keras-team/keras
  - REPO=keras-team/keras
  - REPO=marload/kubeflow             # 2020-07-07 kubeflow/kubeflow
  - REPO=kubeflow/kubeflow
  - REPO=marload/kubernetes           # 2020-07-06 kubernetes/kubernetes
  - REPO=kubernetes/kubernetes
  - REPO=marload/LaneTracking         # 2019-07-05 FrenkT/LaneTracking
  - REPO=FrenkT/LaneTracking
  - REPO=marload/LeNet-keras          # 2018-08-07
  - REPO=marload/MAgent               # 2020-04-08 geek-ai/MAgent
  - REPO=geek-ai/MAgent
  - REPO=marload/mmdetection          # 2020-04-01 open-mmlab/mmdetection
  - REPO=open-mmlab/mmdetection
  - REPO=marload/multiple-gcd-lcm     # 2019-02-09
  - REPO=marload/ngrinder             # 2019-11-22 naver/ngrinder
  - REPO=naver/ngrinder
  - REPO=marload/nni                  # 2020-04-11 microsoft/nni
  - REPO=microsoft/nni
  - REPO=marload/numpy                # 2020-04-14 numpy/numpy
  - REPO=numpy/numpy
  - REPO=marload/online-judge         # 2020-01-27
  - REPO=marload/onnx                 # 2020-05-06 onnx/onnx
  - REPO=onnx/onnx
  - REPO=marload/opencv               # 2020-01-10 opencv/opencv
  - REPO=opencv/opencv
  - REPO=marload/PlotNeuralNet        # 2019-02-21 HarisIqbal88/PlotNeuralNet
  - REPO=HarisIqbal88/PlotNeuralNet
  - REPO=marload/PRML                 # 2020-03-08 ctgk/PRML
  - REPO=ctgk/PRML
  - REPO=marload/pytorch              # 2020-04-20 pytorch/pytorch
  - REPO=pytorch/pytorch
  - REPO=marload/pytorch-tutorial-for-korean  # 2018-11-16
  - REPO=marload/pytorch3d            # 2020-02-11 facebookresearch/pytorch3d
  - REPO=facebookresearch/pytorch3d
  - REPO=marload/quantum              # 2020-04-01 tensorflow/quantum
  - REPO=tensorflow/quantum
  - REPO=marload/ray                  # 2020-04-09 ray-project/ray
  - REPO=ray-project/ray
  - REPO=marload/scc_ml_embedded      # 2019-06-24
  - REPO=marload/Self-Driving-lane-detecting-using-Convolutional-Neural-Network  # 2018-11-23
  - REPO=marload/sonnet               # 2020-04-11 deepmind/sonnet
  - REPO=deepmind/sonnet
  - REPO=marload/spark                # 2020-04-20 apache/spark
  - REPO=apache/spark
  - REPO=marload/swid-serve           # 2019-01-12
  - REPO=marload/swid-tcp-server      # 2019-01-11
  - REPO=marload/symmetrical-synthesis  # 2020-02-14 clovaai/symmetrical-synthesis
  - REPO=clovaai/symmetrical-synthesis
  - REPO=marload/tensorflow           # 2020-05-13 tensorflow/tensorflow
  - REPO=tensorflow/tensorflow
  - REPO=marload/TensorFlow-2.x-Tutorials  # 2019-07-04 dragen1860/TensorFlow-2.x-Tutorials
  - REPO=dragen1860/TensorFlow-2.x-Tutorials
  - REPO=marload/tensorforce          # 2020-03-17 tensorforce/tensorforce
  - REPO=tensorforce/tensorforce
  - REPO=marload/tensorlayer          # 2020-06-18 tensorlayer/tensorlayer
  - REPO=tensorlayer/tensorlayer
  - REPO=marload/tensorpack           # 2020-04-14 tensorpack/tensorpack
  - REPO=tensorpack/tensorpack
  - REPO=marload/test-driven-dev-by-kent_beck  # 2019-02-12
  - REPO=marload/Top-Coder-Algorithm-Training  # 2019-01-08
  - REPO=marload/torchdyn             # 2020-04-28 DiffEqML/torchdyn
  - REPO=DiffEqML/torchdyn
  - REPO=marload/Unbox                # 2020-03-24 monk1337/Unbox
  - REPO=monk1337/Unbox
  - REPO=marload/vaex                 # 2020-07-07 vaexio/vaex
  - REPO=vaexio/vaex
  - REPO=marload/video-processing     # 2019-12-26
  - REPO=marload/WGAN-TensorFlow      # 2019-10-08 ChengBinJin/WGAN-TensorFlow
  - REPO=ChengBinJin/WGAN-TensorFlow

install:
  #- pip install -r requirements.txt
  - pip install codespell flake8  # pytest  # add other testing frameworks later
before_script:
  - URL=https://github.com/${REPO}
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - git clone --depth=50 ${URL} ~/${REPO}  # --branch=master
  - cd ~/${REPO}
script:
  - echo stop the build if there are Python syntax errors or undefined names
  - echo ; echo -n "flake8 testing of ${URL} on " ; python -V
  - time flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
  - echo exit-zero treats all errors as warnings.  The GitHub editor is 127 chars wide
  - flake8 . --count --exit-zero --max-complexity=10 --max-line-length=127 --statistics
  - codespell . --ignore-words-list=ba,referer --skip=./.* --quiet-level=2 || true
  #- true  # pytest --capture=sys
notifications:
  on_success: change
  on_failure: change  # `always` will be the setting once code changes slow down
